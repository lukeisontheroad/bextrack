!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"zk+T":function(t,i,o){"use strict";o.r(i),o.d(i,"TimesPageModule",(function(){return P}));var a,l=o("TEn/"),s=o("tyNb"),d=o("ofXK"),c=o("3Pt+"),m=o("mrSG"),u=o("HPR3"),p=o("u1pB"),f=o("fXoL"),h=o("oZWX"),g=o("zTSL"),v=o("sYmb"),y=((a=function(){function e(){n(this,e)}return r(e,[{key:"transform",value:function(e){if(null===e||""===e)return"00:00";var t=e.split(":");return u.a.pad(t[0])+":"+u.a.pad(t[1])}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275pipe=f["\u0275\u0275definePipe"]({name:"formatDuration",type:a,pure:!0}),a);function S(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275elementStart"](1,"ion-list-header"),f["\u0275\u0275elementStart"](2,"ion-label"),f["\u0275\u0275element"](3,"ion-skeleton-text",14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"p",15),f["\u0275\u0275element"](5,"ion-skeleton-text",16),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"ion-item",17),f["\u0275\u0275elementStart"](7,"ion-thumbnail",18),f["\u0275\u0275element"](8,"ion-skeleton-text",16),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"ion-label"),f["\u0275\u0275elementStart"](10,"h2"),f["\u0275\u0275element"](11,"ion-skeleton-text",19),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"p"),f["\u0275\u0275element"](13,"ion-skeleton-text",20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"p",21),f["\u0275\u0275element"](15,"ion-skeleton-text",16),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"ion-list"),f["\u0275\u0275template"](1,S,16,0,"div",10),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",n.skeletons)}}function w(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",22),f["\u0275\u0275elementStart"](1,"ion-grid"),f["\u0275\u0275elementStart"](2,"ion-row"),f["\u0275\u0275element"](3,"ion-icon",23),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"ion-row"),f["\u0275\u0275elementStart"](5,"h1"),f["\u0275\u0275text"](6),f["\u0275\u0275pipe"](7,"translate"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](7,1,"No times found")))}function x(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"ion-avatar",18),f["\u0275\u0275element"](1,"img",31),f["\u0275\u0275elementEnd"]())}function I(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"ion-avatar",18),f["\u0275\u0275element"](1,"img",32),f["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-item-sliding"),f["\u0275\u0275elementStart"](1,"ion-item",25),f["\u0275\u0275template"](2,x,2,0,"ion-avatar",26),f["\u0275\u0275template"](3,I,2,0,"ion-avatar",26),f["\u0275\u0275elementStart"](4,"ion-label"),f["\u0275\u0275elementStart"](5,"h2"),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"p"),f["\u0275\u0275text"](8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"p"),f["\u0275\u0275text"](10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"p",27),f["\u0275\u0275text"](12),f["\u0275\u0275pipe"](13,"formatDuration"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"ion-item-options",28),f["\u0275\u0275elementStart"](15,"ion-item-option",29),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=t.$implicit;return f["\u0275\u0275nextContext"](2).copy(e)})),f["\u0275\u0275text"](16),f["\u0275\u0275pipe"](17,"translate"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](18,"ion-item-option",30),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=t.$implicit;return f["\u0275\u0275nextContext"](2).delete(e)})),f["\u0275\u0275text"](19),f["\u0275\u0275pipe"](20,"translate"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275propertyInterpolate1"]("routerLink","/display-time/",i.id,""),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",i.allowable_bill),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!i.allowable_bill),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"]("",null==i||null==i.project?null:i.project.name," "),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](null==i||null==i.package?null:i.package.name),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](null==i?null:i.text),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](13,9,null==i?null:i.duration)),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](17,11,"Copy")),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](20,13,"Delete"))}}function k(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275elementStart"](1,"ion-list-header",24),f["\u0275\u0275elementStart"](2,"ion-label"),f["\u0275\u0275text"](3),f["\u0275\u0275pipe"](4,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"p"),f["\u0275\u0275text"](6),f["\u0275\u0275pipe"](7,"toDuration"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](8,E,21,15,"ion-item-sliding",10),f["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("id",n.date),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind2"](4,4,n.date,"EEEE dd.MM.yyyy")),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](7,7,n.total)),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",n.times)}}var C,M,O=((C=function(){function t(e,i){var r=this;n(this,t),this.apiService=e,this.utils=i,this.times=[],this.groupedTimes=[],this.skeletons=new Array(12),this.loading=!0,this.optionsMulti={color:"secondary",weekStart:1},this.apiService.timesUpdated.subscribe((function(){r.updateTimes(!1)})),this.doRefresh(null,!0),this.apiService.getPackages()}return r(t,[{key:"updateTimes",value:function(t){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r,o,a,l,s,d,c,m,u,f=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[],r=new Array,n.next=3,this.apiService.getMyTimesheets(t);case 3:this.times=n.sent,o={},a=e(this.times);try{for(a.s();!(l=a.n()).done;)s=l.value,o[s.date]||(o[s.date]=[]),o[s.date].push(s)}catch(h){a.e(h)}finally{a.f()}for(d=0,c=Object.keys(o);d<c.length;d++)m=c[d],u=o[m].map((function(e){return f.utils.parseDuration(e.duration)})).reduce((function(e,t){return e+t})),i.push({date:o[m][0].date,times:o[m],total:u}),r.push({date:new Date(o[m][0].date),subTitle:(new p.a).transform(u),disable:!1,cssClass:"green"});this.groupedTimes=i,this.optionsMulti={from:new Date(this.times[this.times.length-1].date),to:new Date(this.times[0].date),pickMode:"single",daysConfig:r,color:"secondary",weekStart:1};case 9:case"end":return n.stop()}}),n,this)})))}},{key:"doRefresh",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loading=!0,this.updateTimes(!0),e&&e.target.complete(),setTimeout((function(){n.loading=!1}),1e3);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"delete",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.utils.confirm("Are you sure?","Delete "+e.date+" "+e.duration+" "+e.text);case 2:if(!t.sent){t.next=9;break}return t.next=5,this.apiService.deleteTimesheet(e.id);case 5:this.utils.showToast("Deleted"),this.doRefresh(),t.next=10;break;case 9:this.list.closeSlidingItems();case 10:case"end":return t.stop()}}),t,this)})))}},{key:"copy",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.id=null,this.apiService.postTimesheet(e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"passedDate",value:function(e){var t=new Date(e.time),n=t.getFullYear()+"-"+u.a.pad(t.getMonth()+1)+"-"+u.a.pad(t.getDate());this.scrollTo(n)}},{key:"scrollTo",value:function(e){var t=document.getElementById(e).offsetTop;this.content.scrollToPoint(0,t,500)}}]),t}()).\u0275fac=function(e){return new(e||C)(f["\u0275\u0275directiveInject"](h.a),f["\u0275\u0275directiveInject"](u.a))},C.\u0275cmp=f["\u0275\u0275defineComponent"]({type:C,selectors:[["app-times"]],viewQuery:function(e,t){var n;1&e&&(f["\u0275\u0275viewQuery"](l.IonContent,!0),f["\u0275\u0275staticViewQuery"](l.IonList,!0)),2&e&&(f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.content=n.first),f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.list=n.first))},decls:20,vars:10,consts:[[1,"ion-no-border"],["color","primary"],[1,"tablet"],[1,"ion-justify-content-start"],["size","12","size-md","4",1,"col-calendar"],["sticky","",3,"ngModel","options","type","format","ngModelChange","select"],["size","12","size-md","8",1,"col-content"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","no-items",4,"ngIf"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["routerLink","/create-time/","color","secondary"],["name","add"],["animated","",2,"width","30%"],[2,"width","50px"],["animated",""],["lines","none"],["slot","start"],["animated","",2,"width","70%"],["animated","",2,"width","50%"],["slot","end",2,"width","35px"],[1,"no-items"],["name","timer-outline"],[2,"font-weight","500",3,"id"],["lines","none",3,"routerLink"],["slot","start",4,"ngIf"],["slot","end"],["side","end"],["color","primary",3,"click"],["color","danger",3,"click"],["src","/assets/paid.png"],["src","/assets/free.png"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"ion-header",0),f["\u0275\u0275elementStart"](1,"ion-toolbar",1),f["\u0275\u0275elementStart"](2,"ion-title"),f["\u0275\u0275text"](3),f["\u0275\u0275pipe"](4,"translate"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"ion-grid",2),f["\u0275\u0275elementStart"](6,"ion-row",3),f["\u0275\u0275elementStart"](7,"ion-col",4),f["\u0275\u0275elementStart"](8,"ion-calendar",5),f["\u0275\u0275listener"]("ngModelChange",(function(e){return t.date=e}))("select",(function(e){return t.passedDate(e)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"ion-col",6),f["\u0275\u0275elementStart"](10,"ion-content"),f["\u0275\u0275elementStart"](11,"ion-refresher",7),f["\u0275\u0275listener"]("ionRefresh",(function(e){return t.doRefresh(e)})),f["\u0275\u0275element"](12,"ion-refresher-content"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](13,b,2,1,"ion-list",8),f["\u0275\u0275template"](14,w,8,3,"div",9),f["\u0275\u0275elementStart"](15,"ion-list"),f["\u0275\u0275template"](16,k,9,9,"div",10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"ion-fab",11),f["\u0275\u0275elementStart"](18,"ion-fab-button",12),f["\u0275\u0275element"](19,"ion-icon",13),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind1"](4,8,"Times")," "),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngModel",t.date)("options",t.optionsMulti)("type",t.type)("format","YYYY-MM-DD"),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngIf",t.loading),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",0===t.times.length&&!t.loading),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",t.groupedTimes))},directives:[l.IonHeader,l.IonToolbar,l.IonTitle,l.IonGrid,l.IonRow,l.IonCol,g.CalendarComponent,c.NgControlStatus,c.NgModel,l.IonContent,l.IonRefresher,l.IonRefresherContent,d.NgIf,l.IonList,d.NgForOf,l.IonFab,l.IonFabButton,l.RouterLinkDelegate,s.h,l.IonIcon,l.IonListHeader,l.IonLabel,l.IonSkeletonText,l.IonItem,l.IonThumbnail,l.IonItemSliding,l.IonItemOptions,l.IonItemOption,l.IonAvatar],pipes:[v.c,d.DatePipe,p.a,y],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:translucent}ion-list-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-right:16px}ion-calendar[_ngcontent-%COMP%]{background:#3b6c7a}.col-calendar[_ngcontent-%COMP%]{background-color:#3b6c7a;min-height:370px}@media (max-width:767px){.col-content[_ngcontent-%COMP%]{height:calc(100% - 370px)}}@media (max-height:390px){ion-header[_ngcontent-%COMP%]{display:none}}.tablet[_ngcontent-%COMP%]{margin:0;--ion-grid-padding:0px}.tablet[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0}.tablet[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}  .alert-wrapper{--min-width:80%}"]}),C),T=o("iTUp"),P=((M=function e(){n(this,e)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||M)},imports:[[l.IonicModule,d.CommonModule,c.FormsModule,T.a,v.b,g.CalendarModule,s.i.forChild([{path:"",component:O}])]]}),M)}}])}();