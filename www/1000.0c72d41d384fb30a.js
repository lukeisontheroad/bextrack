"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1e3],{1e3:(b,h,r)=>{r.r(h),r.d(h,{NotificationSettingsPageModule:()=>M});var I=r(6895),m=r(4006),l=r(8058),p=r(2835),c=r(5861),y=r(7423),C=r(7489),s=r(7432),e=r(8274),N=r(9265),_=r(6578),f=r(2466);const{LocalNotifications:u}=y.Vn,T=[{path:"",component:(()=>{class o{constructor(t,n,a){var i=this;this.utils=t,this.storage=n,this.translateService=a,this.time=s.Of.NOTIFICATION_TIME,this.weekdays=s.Of.NOTIFICATION_WEEKDAYS,this.notificationsChanged=C.debounce((0,c.Z)(function*(){i.utils.requestNotificationPermission(),yield i.storeConfiguration(),yield i.cancelNotifications(),i.scheduleNotifications()}),2e3),this.init()}init(){var t=this;return(0,c.Z)(function*(){t.time=yield t.storage.getString(s.P_.SETTINGS_NOTIFICATIONS_TIME,s.Of.NOTIFICATION_TIME),t.weekdays=JSON.parse(yield t.storage.getString(s.P_.SETTINGS_NOTIFICATIONS_WEEKDAYS,JSON.stringify(s.Of.NOTIFICATION_WEEKDAYS)))})()}storeConfiguration(){var t=this;return(0,c.Z)(function*(){yield t.storage.setItem(s.P_.SETTINGS_NOTIFICATIONS_TIME,t.time),yield t.storage.setItem(s.P_.SETTINGS_NOTIFICATIONS_WEEKDAYS,JSON.stringify(t.weekdays)),t.utils.showToast("Updated")})()}cancelNotifications(){return(0,c.Z)(function*(){let t=yield u.getPending();u.cancel(t)})()}scheduleNotifications(){var t=this;return(0,c.Z)(function*(){let n=parseInt(t.time.split(":")[0]),a=parseInt(t.time.split(":")[1]),i=[];var S=1;const k=yield t.translateService.get("BexTrack").toPromise(),P=yield t.translateService.get("Did you track your time for today?").toPromise();for(let g of Object.keys(t.weekdays))if(t.weekdays[g]){let E=parseInt(g.substring(1));i.push({id:S,title:k,text:P,foreground:!0,trigger:{every:{weekday:E,hour:n,minute:a}}}),S++}if(i.length>0)try{cordova.plugins.notification.local.schedule(i)}catch(g){console.error("Schedule Notifications",g)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(N.F),e.\u0275\u0275directiveInject(_.V),e.\u0275\u0275directiveInject(f.sK))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-notification-settings"]],decls:52,vars:38,consts:[["color","primary"],["slot","start"],["mode","md","defaultHref","/tabs/settings"],["displayFormat","HH:mm",3,"ngModel","ngModelChange","ionChange"],["slot","end",3,"ngModel","ngModelChange","ionChange"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.\u0275\u0275element(3,"ion-back-button",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-title"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"ion-content")(8,"ion-list")(9,"ion-list-header"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"ion-item")(13,"ion-label"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"ion-datetime",3),e.\u0275\u0275listener("ngModelChange",function(i){return n.time=i})("ionChange",function(){return n.notificationsChanged()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"ion-item")(18,"ion-label"),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"ion-checkbox",4),e.\u0275\u0275listener("ngModelChange",function(i){return n.weekdays.d1=i})("ionChange",function(){return n.notificationsChanged()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"ion-item")(23,"ion-label"),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"ion-checkbox",4),e.\u0275\u0275listener("ngModelChange",function(i){return n.weekdays.d2=i})("ionChange",function(){return n.notificationsChanged()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"ion-item")(28,"ion-label"),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"ion-checkbox",4),e.\u0275\u0275listener("ngModelChange",function(i){return n.weekdays.d3=i})("ionChange",function(){return n.notificationsChanged()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"ion-item")(33,"ion-label"),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"ion-checkbox",4),e.\u0275\u0275listener("ngModelChange",function(i){return n.weekdays.d4=i})("ionChange",function(){return n.notificationsChanged()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"ion-item")(38,"ion-label"),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"ion-checkbox",4),e.\u0275\u0275listener("ngModelChange",function(i){return n.weekdays.d5=i})("ionChange",function(){return n.notificationsChanged()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"ion-item")(43,"ion-label"),e.\u0275\u0275text(44),e.\u0275\u0275pipe(45,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"ion-checkbox",4),e.\u0275\u0275listener("ngModelChange",function(i){return n.weekdays.d6=i})("ionChange",function(){return n.notificationsChanged()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(47,"ion-item")(48,"ion-label"),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"ion-checkbox",4),e.\u0275\u0275listener("ngModelChange",function(i){return n.weekdays.d0=i})("ionChange",function(){return n.notificationsChanged()}),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,18,"Notification settings")," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,20,"Time tracking reminder")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,22,"Reminder time")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.time),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(20,24,"Monday")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.weekdays.d1),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(25,26,"Tuesday")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.weekdays.d2),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(30,28,"Wednesday")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.weekdays.d3),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(35,30,"Thursday")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.weekdays.d4),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(40,32,"Friday")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.weekdays.d5),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(45,34,"Saturday")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.weekdays.d6),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(50,36,"Sunday")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.weekdays.d0))},dependencies:[m.NgControlStatus,m.NgModel,l.IonBackButton,l.IonButtons,l.IonCheckbox,l.IonContent,l.IonDatetime,l.IonHeader,l.IonItem,l.IonLabel,l.IonList,l.IonListHeader,l.IonTitle,l.IonToolbar,l.BooleanValueAccessor,l.SelectValueAccessor,l.IonBackButtonDelegate,f.X$]}),o})()}];let v=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.Bz.forChild(T),p.Bz]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[I.CommonModule,m.FormsModule,l.IonicModule,f.aw,v]}),o})()}}]);