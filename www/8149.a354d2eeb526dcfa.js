"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8149],{8149:(S,c,n)=>{n.r(c),n.d(c,{AuthCallbackPageModule:()=>C});var h=n(6895),d=n(4006),u=n(2835),a=n(8058),v=n(5861),l=n(3790),i=n(8274),g=n(5146),m=n(9265);const f=[{path:"",component:(()=>{class t{constructor(o,r,e,p,A){this.auth=o,this.apiService=r,this.utilsService=e,this.navCtrl=p,this.router=A}ngOnInit(){this.observer=this.auth.addActionListener(o=>this.postCallback(o)),this.auth.handleCallback(window.location.origin+this.router.url)}ngOnDestroy(){this.auth.removeActionObserver(this.observer)}postCallback(o){var r=this;return(0,v.Z)(function*(){if(o.action===l.AuthActions.SignInSuccess)try{yield r.apiService.init(),r.navCtrl.navigateRoot("tabs")}catch(e){r.utilsService.showToast(e.error&&e.error.error_code&&403==e.error.error_code&&e.error.message&&"You are not allowed to access this ressource."==e.error.message?"no-time-permissions":e.error&&e.error.message?e.error.message:e.message?e.message:"Error: "+JSON.stringify(e)),r.navCtrl.navigateRoot("login")}o.action===l.AuthActions.SignInFailed&&(r.utilsService.showToast("sign-in-failed"),console.log("SignInFailed redirect to login"),r.navCtrl.navigateRoot("login"))})()}}return t.\u0275fac=function(o){return new(o||t)(i.\u0275\u0275directiveInject(l.AuthService),i.\u0275\u0275directiveInject(g.s),i.\u0275\u0275directiveInject(m.F),i.\u0275\u0275directiveInject(a.NavController),i.\u0275\u0275directiveInject(u.F0))},t.\u0275cmp=i.\u0275\u0275defineComponent({type:t,selectors:[["app-auth-callback"]],decls:2,vars:0,consts:[["color","primary"],["color","secondary",2,"position","absolute","left","40%","top","40%","width","20%","height","20%"]],template:function(o,r){1&o&&(i.\u0275\u0275elementStart(0,"ion-content",0),i.\u0275\u0275element(1,"ion-spinner",1),i.\u0275\u0275elementEnd())},dependencies:[a.IonContent,a.IonSpinner]}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[h.CommonModule,d.FormsModule,a.IonicModule,u.Bz.forChild(f)]}),t})()}}]);