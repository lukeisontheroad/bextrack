(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{AqnX:function(e,t,o){"use strict";o.r(t),o.d(t,"AuthCallbackPageModule",(function(){return v}));var i=o("ofXK"),r=o("3Pt+"),n=o("tyNb"),s=o("TEn/"),c=o("mrSG"),a=o("zEhZ"),l=o("fXoL"),h=o("oZWX"),u=o("HPR3");const d=[{path:"",component:(()=>{class e{constructor(e,t,o,i,r){this.auth=e,this.apiService=t,this.utilsService=o,this.navCtrl=i,this.router=r}ngOnInit(){this.observer=this.auth.addActionListener(e=>this.postCallback(e)),this.auth.handleCallback(window.location.origin+this.router.url)}ngOnDestroy(){this.auth.removeActionObserver(this.observer)}postCallback(e){return Object(c.a)(this,void 0,void 0,(function*(){if(e.action===a.AuthActions.SignInSuccess)try{yield this.apiService.init(),this.navCtrl.navigateRoot("tabs")}catch(t){this.utilsService.showToast(t.error&&t.error.error_code&&403==t.error.error_code&&t.error.message&&"You are not allowed to access this ressource."==t.error.message?"no-time-permissions":t.error&&t.error.message?t.error.message:t.message?t.message:"Error: "+JSON.stringify(t)),this.navCtrl.navigateRoot("login")}e.action===a.AuthActions.SignInFailed&&(this.utilsService.showToast("sign-in-failed"),console.log("SignInFailed redirect to login"),this.navCtrl.navigateRoot("login"))}))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](a.AuthService),l["\u0275\u0275directiveInject"](h.a),l["\u0275\u0275directiveInject"](u.a),l["\u0275\u0275directiveInject"](s.NavController),l["\u0275\u0275directiveInject"](n.g))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-auth-callback"]],decls:2,vars:0,consts:[["color","primary"],["color","secondary",2,"position","absolute","left","40%","top","40%","width","20%","height","20%"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"ion-content",0),l["\u0275\u0275element"](1,"ion-spinner",1),l["\u0275\u0275elementEnd"]())},directives:[s.IonContent,s.IonSpinner],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,r.FormsModule,s.IonicModule,n.i.forChild(d)]]}),e})()}}]);