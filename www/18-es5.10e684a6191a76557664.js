!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{XRIH:function(n,r,o){"use strict";o.r(r),o.d(r,"LoadingPageModule",(function(){return g}));var i,a,s=o("ofXK"),c=o("3Pt+"),u=o("TEn/"),h=o("mrSG"),v=o("zEhZ"),f=o("fXoL"),d=o("oZWX"),l=o("HPR3"),p=((i=function(){function n(t,r,o,i){e(this,n),this.auth=t,this.apiService=r,this.navCtrl=o,this.utilsService=i}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.observer=this.auth.addActionListener((function(e){return t.actionHandler(e)})),this.auth.loadTokenFromStorage().then((function(e){return Object(h.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.auth.getValidToken().then((function(){return Object(h.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initApiService();case 1:case"end":return e.stop()}}),e,this)})))})).catch((function(){t.auth.refreshToken().then((function(e){return Object(h.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initApiService();case 1:case"end":return e.stop()}}),e,this)})))}))}));case 1:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"initApiService",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiService.init();case 3:this.navCtrl.navigateRoot("tabs"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.utilsService.showToast(e.t0.error&&e.t0.error.error_code&&403==e.t0.error.error_code&&e.t0.error.message&&"You are not allowed to access this ressource."==e.t0.error.message?"no-time-permissions":e.t0.error&&e.t0.error.message?e.t0.error.message:e.t0.message?e.t0.message:"Error: "+JSON.stringify(e.t0)),this.navCtrl.navigateRoot("login");case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"actionHandler",value:function(e){console.log("actionhandler",e),e.error&&e.action===v.AuthActions.LoadUserInfoFailed&&this.navCtrl.navigateRoot("login")}},{key:"ngOnDestroy",value:function(){this.auth.removeActionObserver(this.observer)}}])&&t(r.prototype,o),i&&t(r,i),n}()).\u0275fac=function(e){return new(e||i)(f["\u0275\u0275directiveInject"](v.AuthService),f["\u0275\u0275directiveInject"](d.a),f["\u0275\u0275directiveInject"](u.NavController),f["\u0275\u0275directiveInject"](l.a))},i.\u0275cmp=f["\u0275\u0275defineComponent"]({type:i,selectors:[["app-loading"]],decls:2,vars:0,consts:[["color","primary"],["color","secondary",2,"position","absolute","left","40%","top","40%","width","20%","height","20%"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"ion-content",0),f["\u0275\u0275element"](1,"ion-spinner",1),f["\u0275\u0275elementEnd"]())},directives:[u.IonContent,u.IonSpinner],styles:[""]}),i),m=o("tyNb"),g=((a=function t(){e(this,t)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:a}),a.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||a)},imports:[[s.CommonModule,c.FormsModule,u.IonicModule,m.i.forChild([{path:"",component:p}])]]}),a)}}])}();