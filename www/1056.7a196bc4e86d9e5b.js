"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1056],{1056:(y,h,e)=>{e.r(h),e.d(h,{AuthCallbackPageModule:()=>p});var v=e(177),g=e(9417),u=e(3871),n=e(4742),d=e(467),c=e(5154),s=e(6996),m=e(6929),C=e(9893),f=e(2872);const A=[{path:"",component:(()=>{var a;class i{constructor(o,r,t,S,b){this.auth=o,this.apiService=r,this.utilsService=t,this.navCtrl=S,this.router=b}ngOnInit(){this.observer=this.auth.addActionListener(o=>this.postCallback(o)),this.auth.handleCallback(window.location.origin+this.router.url)}ngOnDestroy(){this.auth.removeActionObserver(this.observer)}postCallback(o){var r=this;return(0,d.A)(function*(){if(o.action===c.AuthActions.SignInSuccess)try{yield r.apiService.init(),r.navCtrl.navigateRoot("tabs")}catch(t){r.utilsService.showToast(t.error&&t.error.error_code&&403===t.error.error_code&&t.error.message&&"You are not allowed to access this ressource."===t.error.message?"no-time-permissions":t.error&&t.error.message?t.error.message:t.message?t.message:"Error: "+JSON.stringify(t)),r.navCtrl.navigateRoot("login")}o.action===c.AuthActions.SignInFailed&&(r.utilsService.showToast("sign-in-failed"),console.log("SignInFailed redirect to login"),r.navCtrl.navigateRoot("login"))})()}}return(a=i).\u0275fac=function(o){return new(o||a)(s.rXU(c.AuthService),s.rXU(m.G),s.rXU(C.T),s.rXU(f.q9),s.rXU(u.Ix))},a.\u0275cmp=s.VBU({type:a,selectors:[["app-auth-callback"]],decls:2,vars:0,consts:[["color","primary"],["color","secondary",2,"position","absolute","left","40%","top","40%","width","20%","height","20%"]],template:function(o,r){1&o&&(s.j41(0,"ion-content",0),s.nrm(1,"ion-spinner",1),s.k0s())},dependencies:[n.W9,n.w2]}),i})()}];let p=(()=>{var a;class i{}return(a=i).\u0275fac=function(o){return new(o||a)},a.\u0275mod=s.$C({type:a}),a.\u0275inj=s.G2t({imports:[v.MD,g.YN,n.bv,u.iI.forChild(A)]}),i})()}}]);