"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2395],{2395:(j,c,s)=>{s.r(c),s.d(c,{DashboardPageModule:()=>H});var p=s(6895),f=s(4006),i=s(8058),h=s(2835),m=s(5861),e=s(8274),x=s(5146),v=s(9265),u=s(5095),g=s(2466);const b=["width"];function I(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"number"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,t.totalHoursLastWeek,"1.0-2"))}}function y(n,r){1&n&&e.\u0275\u0275element(0,"ion-skeleton-text",9)}function D(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"number"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t.chargeabilityLastWeek,"1.0-0"),"%")}}function M(n,r){1&n&&e.\u0275\u0275element(0,"ion-skeleton-text",9)}function P(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"number"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,t.totalHoursLastMonth,"1.0-2"))}}function L(n,r){1&n&&e.\u0275\u0275element(0,"ion-skeleton-text",9)}function w(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"number"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(2,1,t.chargeabilityLastMonth,"1.0-0"),"%")}}function S(n,r){1&n&&e.\u0275\u0275element(0,"ion-skeleton-text",9)}function k(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275element(1,"ngx-charts-pie-chart",11),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("view",t.view)("scheme",t.colorScheme)("results",t.data)("gradient",t.gradient)("legend",t.showLegend)("legendPosition",t.legendPosition)("labels",t.showLabels)("doughnut",t.isDoughnut)}}function C(n,r){1&n&&(e.\u0275\u0275elementStart(0,"h2"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"No data available")))}const E=[{path:"",component:(()=>{class n{constructor(t,o){this.apiService=t,this.utils=o,this.view=null,this.timesheets=[],this.timesheetsLastWeek=[],this.timesheetsLastMonth=[],this.lastWeek=new Date(Date.now()-6048e5),this.lastMonth=new Date(Date.now()-2592e6),this.totalHoursLastWeek=0,this.payedHoursLastWeek=0,this.chargeabilityLastWeek=0,this.totalHoursLastMonth=0,this.payedHoursLastMonth=0,this.chargeabilityLastMonth=0,this.data=[],this.loading=!1,this.gradient=!1,this.showLegend=!0,this.showLabels=!1,this.isDoughnut=!1,this.legendPosition="left",this.colorScheme={domain:["#093948","#A2C003","#0085BA","#DCC521","#DB7C00","#C81919"]},this.projects={},this.doRefresh(),this.apiService.timesUpdated.subscribe(()=>this.doRefresh())}ionViewDidEnter(){let t=this.widthElement.el.scrollWidth;this.view=[t,t]}doRefresh(t,o=!1){var l=this;return(0,m.Z)(function*(){l.loading=!0,l.data=[],setTimeout(()=>{l.calculateStatistics(),t&&t.target.complete(),l.loading=!1},1e3)})()}calculateStatistics(){var t=this;return(0,m.Z)(function*(){t.timesheets=yield t.apiService.getMyTimesheets(),t.timesheetsLastWeek=t.timesheets.filter(a=>new Date(a.date)>=t.lastWeek),t.timesheetsLastMonth=t.timesheets.filter(a=>new Date(a.date)>=t.lastMonth),t.totalHoursLastWeek=t.timesheetsLastWeek.map(a=>t.utils.parseDuration(a.duration)).reduce((a,d)=>a+d,0),t.payedHoursLastWeek=t.timesheetsLastWeek.filter(a=>a.allowable_bill).map(a=>t.utils.parseDuration(a.duration)).reduce((a,d)=>a+d,0),t.chargeabilityLastWeek=t.payedHoursLastWeek>0?t.payedHoursLastWeek/t.totalHoursLastWeek*100:0,t.totalHoursLastMonth=t.timesheetsLastMonth.map(a=>t.utils.parseDuration(a.duration)).reduce((a,d)=>a+d,0),t.payedHoursLastMonth=t.timesheetsLastMonth.filter(a=>a.allowable_bill).map(a=>t.utils.parseDuration(a.duration)).reduce((a,d)=>a+d,0),t.chargeabilityLastMonth=t.payedHoursLastMonth>0?t.payedHoursLastMonth/t.totalHoursLastMonth*100:0;for(var o=0;o<t.timesheetsLastMonth.length;o++){let a=t.timesheetsLastMonth[o];a.project?a.project.name in t.projects?t.projects[a.project.name]+=t.utils.parseDuration(a.duration):t.projects[a.project.name]=t.utils.parseDuration(a.duration):"Unknown"in t.projects?t.projects.Unknown+=t.utils.parseDuration(a.duration):t.projects.Unknown=t.utils.parseDuration(a.duration)}let l=[];for(const[a,d]of Object.entries(t.projects))l.push({name:a,value:d});t.data=l})()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x.s),e.\u0275\u0275directiveInject(v.F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-dashboard"]],viewQuery:function(t,o){if(1&t&&e.\u0275\u0275viewQuery(b,7),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(o.widthElement=l.first)}},decls:79,vars:46,consts:[["color","primary"],["slot","fixed",3,"ionRefresh"],["size","6","size-md","3"],[4,"ngIf"],["animated","",4,"ngIf"],["size","12","size-md","6","size-lg","3"],["width",""],["id","pie-chart-parent",4,"ngIf"],["expand","full","onclick","window.open('https://feedback.bextrack.com', '_system', 'location=yes'); return false;"],["animated",""],["id","pie-chart-parent"],[3,"view","scheme","results","gradient","legend","legendPosition","labels","doughnut"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"ion-content")(6,"ion-refresher",1),e.\u0275\u0275listener("ionRefresh",function(a){return o.doRefresh(a)}),e.\u0275\u0275element(7,"ion-refresher-content"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"ion-grid")(9,"ion-row")(10,"ion-col",2)(11,"ion-card")(12,"ion-card-header")(13,"ion-card-subtitle"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"ion-card-title"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"ion-card-content"),e.\u0275\u0275template(20,I,3,4,"h1",3),e.\u0275\u0275template(21,y,1,0,"ion-skeleton-text",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"ion-col",2)(23,"ion-card")(24,"ion-card-header")(25,"ion-card-subtitle"),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"ion-card-title"),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"ion-card-content"),e.\u0275\u0275template(32,D,3,4,"h1",3),e.\u0275\u0275template(33,M,1,0,"ion-skeleton-text",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(34,"ion-col",2)(35,"ion-card")(36,"ion-card-header")(37,"ion-card-subtitle"),e.\u0275\u0275text(38),e.\u0275\u0275pipe(39,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"ion-card-title"),e.\u0275\u0275text(41),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"ion-card-content"),e.\u0275\u0275template(44,P,3,4,"h1",3),e.\u0275\u0275template(45,L,1,0,"ion-skeleton-text",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(46,"ion-col",2)(47,"ion-card")(48,"ion-card-header")(49,"ion-card-subtitle"),e.\u0275\u0275text(50),e.\u0275\u0275pipe(51,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"ion-card-title"),e.\u0275\u0275text(53),e.\u0275\u0275pipe(54,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"ion-card-content"),e.\u0275\u0275template(56,w,3,4,"h1",3),e.\u0275\u0275template(57,S,1,0,"ion-skeleton-text",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(58,"ion-col",5)(59,"ion-card")(60,"ion-card-header")(61,"ion-card-title",null,6),e.\u0275\u0275text(63),e.\u0275\u0275pipe(64,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(65,"ion-card-content"),e.\u0275\u0275template(66,k,2,8,"div",7),e.\u0275\u0275template(67,C,3,3,"h2",3),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(68,"ion-col",5)(69,"ion-card")(70,"ion-card-header")(71,"ion-card-title",null,6),e.\u0275\u0275text(73),e.\u0275\u0275pipe(74,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(75,"ion-card-content")(76,"ion-button",8),e.\u0275\u0275text(77),e.\u0275\u0275pipe(78,"translate"),e.\u0275\u0275elementEnd()()()()()()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,22,"Dashboard")," "),e.\u0275\u0275advance(11),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,24,"7 days")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,26,"Hours")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.loading),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(27,28,"7 days")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(30,30,"Billable")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.loading),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(39,32,"30 days")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(42,34,"Hours")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.loading),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(51,36,"30 days")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(54,38,"Billable")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!o.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.loading),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(64,40,"Hours by Project")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.view&&o.data.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===o.data.length),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(74,42,"missing-a-report")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(78,44,"Provide Feedback")))},dependencies:[p.NgIf,i.IonButton,i.IonCard,i.IonCardContent,i.IonCardHeader,i.IonCardSubtitle,i.IonCardTitle,i.IonCol,i.IonContent,i.IonGrid,i.IonHeader,i.IonRefresher,i.IonRefresherContent,i.IonRow,i.IonSkeletonText,i.IonTitle,i.IonToolbar,u.JU,p.DecimalPipe,g.X$],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-size:xx-large;color:#000;font-weight:700}#pie-chart-parent[_ngcontent-%COMP%]{display:grid;min-height:400px}@media (min-width: 820px){ion-grid[_ngcontent-%COMP%]{flex-direction:row-reverse}}ion-skeleton-text[_ngcontent-%COMP%]{width:50px;height:25px;margin:auto}ion-content[_ngcontent-%COMP%]{--padding-bottom: 0;--padding-end: 0;--padding-start: 0;--padding-top: 0}ion-card-title[_ngcontent-%COMP%]{font-size:24px;min-height:62px}"]}),n})()}];let B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[h.Bz.forChild(E),h.Bz]}),n})(),H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.CommonModule,f.FormsModule,i.IonicModule,g.aw,u.a4,B]}),n})()}}]);