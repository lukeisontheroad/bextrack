"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1262],{1262:($,u,s)=>{s.r(u),s.d(u,{ProjectsPageModule:()=>J});var r=s(8058),f=s(2835),p=s(6895),_=s(4006),m=s(5861),c=s(7432),e=s(8274),g=s(5146),h=s(6578),d=s(2466);function v(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate4("",e.\u0275\u0275pipeBind1(2,4,"Time estimated"),": ",null==t.object?null:t.object.spent_time_in_hours," / ",null==t.object?null:t.object.estimated_time_in_hours," ",e.\u0275\u0275pipeBind1(3,6,"hours"),"")}}function j(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate3("",e.\u0275\u0275pipeBind1(2,3,"Time spend"),": ",null==t.object?null:t.object.spent_time_in_hours," ",e.\u0275\u0275pipeBind1(3,5,"hours"),"")}}function P(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"number"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate5("",e.\u0275\u0275pipeBind1(2,5,"Time spend"),": ",null==t.object?null:t.object.spent_time_in_hours," / ",null==t.object?null:t.object.estimated_time_in_hours," ",e.\u0275\u0275pipeBind1(3,7,"hours")," (",e.\u0275\u0275pipeBind2(4,9,(null==t.object?null:t.object.spent_time_in_hours)/(null==t.object?null:t.object.estimated_time_in_hours)*100,"1.0-0"),"%)")}}let I=(()=>{class n{constructor(){this.object=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-time-display"]],inputs:{object:"object"},decls:3,vars:3,consts:[[4,"ngIf"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,v,4,8,"p",0),e.\u0275\u0275template(1,j,4,7,"p",0),e.\u0275\u0275template(2,P,5,12,"p",0)),2&t&&(e.\u0275\u0275property("ngIf",(null==i.object?null:i.object.estimated_time_in_hours)>0&&0==(null==i.object?null:i.object.spent_time_in_hours)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==(null==i.object?null:i.object.estimated_time_in_hours)&&(null==i.object?null:i.object.spent_time_in_hours)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==i.object?null:i.object.estimated_time_in_hours)>0&&(null==i.object?null:i.object.spent_time_in_hours)>0))},dependencies:[p.NgIf,p.DecimalPipe,d.X$],styles:["p[_ngcontent-%COMP%]{color:#0006}"]}),n})();const y=["sectionSelect"];function x(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-icon",15),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.toggleFilters(l))}),e.\u0275\u0275elementEnd()}}function S(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-icon",16),e.\u0275\u0275listener("click",function(l){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.toggleFilters(l))}),e.\u0275\u0275elementEnd()}}function C(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.toggleFavorites())}),e.\u0275\u0275element(1,"ion-icon",18),e.\u0275\u0275elementEnd()}}function T(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.toggleFavorites())}),e.\u0275\u0275element(1,"ion-icon",19),e.\u0275\u0275elementEnd()}}function O(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"ion-item")(2,"ion-avatar",20),e.\u0275\u0275element(3,"ion-skeleton-text",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-label"),e.\u0275\u0275element(5,"ion-skeleton-text",22),e.\u0275\u0275elementEnd()()())}function b(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"ion-list"),e.\u0275\u0275template(1,O,6,0,"div",14),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.skeletons)}}function F(n,o){1&n&&e.\u0275\u0275element(0,"ion-icon",26)}function E(n,o){1&n&&e.\u0275\u0275element(0,"ion-icon",27)}function w(n,o){1&n&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"No projects found")))}function R(n,o){1&n&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"No favorite project found")))}function k(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23)(1,"ion-grid")(2,"ion-row"),e.\u0275\u0275template(3,F,1,0,"ion-icon",24),e.\u0275\u0275template(4,E,1,0,"ion-icon",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"ion-row"),e.\u0275\u0275template(6,w,3,3,"h1",12),e.\u0275\u0275template(7,R,3,3,"h1",12),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.showOnlyFavorites),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.showOnlyFavorites),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.showOnlyFavorites),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.showOnlyFavorites)}}function V(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-item-option",33),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.favorite(l.id))}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Favorite"),""))}function M(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-item-option",33),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const l=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.favorite(l.id))}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Unfavorite"),""))}function B(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"ion-item",28)(1,"ion-avatar",20),e.\u0275\u0275element(2,"img",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"ion-label")(4,"h2"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"app-time-display",29),e.\u0275\u0275elementEnd()()),2&n){const t=o.$implicit,i=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275propertyInterpolate2("routerLink","/create-time/",i.id,"/",t.id,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("object",t)}}function L(n,o){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"ion-item-sliding")(2,"ion-item",28)(3,"ion-label")(4,"h2"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"app-time-display",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"ion-item-options",30),e.\u0275\u0275template(8,V,3,3,"ion-item-option",31),e.\u0275\u0275template(9,M,3,3,"ion-item-option",31),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,B,7,4,"ion-item",32),e.\u0275\u0275elementEnd()),2&n){const t=o.$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("routerLink","/create-time/",t.id,""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("object",t),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",-1==i.favorites.indexOf(t.id)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.favorites.indexOf(t.id)>-1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.packages)}}let A=(()=>{class n{constructor(t,i){this.apiService=t,this.storage=i,this.loading=!0,this.skeletons=new Array(30),this.projects=[],this.allProjects=[],this.showOnlyFavorites=!1,this.currentFilter="",this.searchString="",this.favorites=[],this.init()}init(){var t=this;return(0,m.Z)(function*(){t.currentFilter=yield t.storage.getString(c.P_.PROJECTS_CURRENT_FILTER,c.Of.CURRENT_FILTER),t.showOnlyFavorites=yield t.storage.getBoolean(c.P_.PROJECTS_SHOW_FAVORITES,c.Of.SHOW_FAVORITES),t.favorites=JSON.parse(yield t.storage.getString(c.P_.PROJECTS_FAVORITES,JSON.stringify(c.Of.FAVORITES))),t.doRefresh(),t.apiService.projectsUpdated.subscribe((0,m.Z)(function*(){t.allProjects=yield t.apiService.getProjects(),t.setActiveList()}))})()}doRefresh(t){var i=this;return(0,m.Z)(function*(){i.loading=!0,yield i.apiService.getPackages(!0),t&&t.target.complete(),i.loading=!1})()}toggleFavorites(){var t=this;return(0,m.Z)(function*(){t.showOnlyFavorites=!t.showOnlyFavorites,yield t.storage.setItem(c.P_.PROJECTS_SHOW_FAVORITES,t.showOnlyFavorites),t.setActiveList()})()}setActiveList(){this.projects=this.showOnlyFavorites?this.allProjects.filter(t=>this.favorites.indexOf(t.id)>-1):this.allProjects,"1"===this.currentFilter?this.projects=this.projects.filter(t=>t.packages.length>0):"2"===this.currentFilter&&(this.projects=this.projects.filter(t=>t.spent_time_in_hours>0)),this.searchString.length>0&&(this.projects=this.projects.filter(t=>t.name.toLocaleLowerCase().indexOf(this.searchString.toLocaleLowerCase())>-1))}favorite(t){-1===this.favorites.indexOf(t)?this.favorites.push(t):this.favorites=this.favorites.filter(i=>i!==t),this.storage.setItem(c.P_.PROJECTS_FAVORITES,JSON.stringify(this.favorites)),this.list.closeSlidingItems(),this.doRefresh()}toggleFilters(t){this.sectionSelect.open(t)}filterSet(t){this.currentFilter=t.detail.value,this.setActiveList(),this.storage.setItem(c.P_.PROJECTS_CURRENT_FILTER,this.currentFilter)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(g.s),e.\u0275\u0275directiveInject(h.V))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-projects"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(r.IonList,7),e.\u0275\u0275viewQuery(y,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(i.list=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(i.sectionSelect=l.first)}},decls:31,vars:24,consts:[["color","primary"],["slot","end"],["slot","icon-only","name","funnel-outline",3,"click",4,"ngIf"],["slot","icon-only","name","funnel",3,"click",4,"ngIf"],["interface","popover",2,"display","none",3,"ngModel","ionChange","ngModelChange"],["sectionSelect",""],["value",""],["value","1"],["value","2"],[3,"click",4,"ngIf"],["mode","ios","debounce","500",3,"placeholder","ngModel","ngModelChange","ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","no-items",4,"ngIf"],[4,"ngFor","ngForOf"],["slot","icon-only","name","funnel-outline",3,"click"],["slot","icon-only","name","funnel",3,"click"],[3,"click"],["slot","icon-only","name","star"],["slot","icon-only","name","star-outline"],["slot","start"],["animated",""],["animated","",2,"width","60%"],[1,"no-items"],["name","briefcase-outline",4,"ngIf"],["name","star-outline",4,"ngIf"],["name","briefcase-outline"],["name","star-outline"],[3,"routerLink"],[3,"object"],["side","end"],["color","warning",3,"click",4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],["color","warning",3,"click"],["src","/assets/package.png"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.\u0275\u0275template(3,x,1,0,"ion-icon",2),e.\u0275\u0275template(4,S,1,0,"ion-icon",3),e.\u0275\u0275elementStart(5,"ion-select",4,5),e.\u0275\u0275listener("ionChange",function(a){return i.filterSet(a)})("ngModelChange",function(a){return i.currentFilter=a}),e.\u0275\u0275elementStart(7,"ion-select-option",6),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"ion-select-option",7),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"ion-select-option",8),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(16,C,2,0,"ion-button",9),e.\u0275\u0275template(17,T,2,0,"ion-button",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"ion-title"),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"ion-toolbar")(22,"ion-searchbar",10),e.\u0275\u0275listener("ngModelChange",function(a){return i.searchString=a})("ionChange",function(){return i.setActiveList()}),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"ion-content")(25,"ion-refresher",11),e.\u0275\u0275listener("ionRefresh",function(a){return i.doRefresh(a)}),e.\u0275\u0275element(26,"ion-refresher-content"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(27,b,2,1,"ion-list",12),e.\u0275\u0275template(28,k,8,4,"div",13),e.\u0275\u0275elementStart(29,"ion-list"),e.\u0275\u0275template(30,L,11,6,"div",14),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==i.currentFilter),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",""!=i.currentFilter),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",i.currentFilter),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,14,"All")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,16,"With Packages")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,18,"With time spend")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.showOnlyFavorites),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.showOnlyFavorites),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(20,20,"Projects")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("placeholder",e.\u0275\u0275pipeBind1(23,22,"Projectname"))("ngModel",i.searchString),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",i.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===i.projects.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",i.projects))},dependencies:[r.IonAvatar,r.IonButton,r.IonButtons,r.IonContent,r.IonGrid,r.IonHeader,r.IonIcon,r.IonItem,r.IonItemOption,r.IonItemOptions,r.IonItemSliding,r.IonLabel,r.IonList,r.IonRefresher,r.IonRefresherContent,r.IonRow,r.IonSearchbar,r.IonSelect,r.IonSelectOption,r.IonSkeletonText,r.IonTitle,r.IonToolbar,r.SelectValueAccessor,r.TextValueAccessor,r.RouterLinkDelegate,p.NgForOf,p.NgIf,_.NgControlStatus,_.NgModel,I,f.rH,d.X$],styles:["ion-searchbar[_ngcontent-%COMP%]{padding:16px}ion-popover[_ngcontent-%COMP%]{--width: 300px}.no-items[_ngcontent-%COMP%]{text-align:center}"]}),n})();var N=s(5503),D=s(5642);let J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[r.IonicModule,p.CommonModule,_.FormsModule,D.K,d.aw,N.D,f.Bz.forChild([{path:"",component:A}])]}),n})()}}]);