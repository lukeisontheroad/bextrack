(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"2FS5":function(e,t,n){"use strict";n.r(t),n.d(t,"NotificationSettingsPageModule",(function(){return S}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),d=n("mrSG"),l=n("gcOT"),s=n("LvDl"),c=n("TCge"),m=n("fXoL"),p=n("HPR3"),u=n("E2f4"),g=n("sYmb");const{LocalNotifications:h}=l.Plugins,f=[{path:"",component:(()=>{class e{constructor(e,t,n){this.utils=e,this.storage=t,this.translateService=n,this.time=c.a.NOTIFICATION_TIME,this.weekdays=c.a.NOTIFICATION_WEEKDAYS,this.notificationsChanged=s.debounce(()=>Object(d.a)(this,void 0,void 0,(function*(){this.utils.requestNotificationPermission(),yield this.storeConfiguration(),yield this.cancelNotifications(),this.scheduleNotifications()})),2e3),this.init()}init(){return Object(d.a)(this,void 0,void 0,(function*(){this.time=yield this.storage.getString(c.b.SETTINGS_NOTIFICATIONS_TIME,c.a.NOTIFICATION_TIME),this.weekdays=JSON.parse(yield this.storage.getString(c.b.SETTINGS_NOTIFICATIONS_WEEKDAYS,JSON.stringify(c.a.NOTIFICATION_WEEKDAYS)))}))}storeConfiguration(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.storage.setItem(c.b.SETTINGS_NOTIFICATIONS_TIME,this.time),yield this.storage.setItem(c.b.SETTINGS_NOTIFICATIONS_WEEKDAYS,JSON.stringify(this.weekdays)),this.utils.showToast("Updated")}))}cancelNotifications(){return Object(d.a)(this,void 0,void 0,(function*(){let e=yield h.getPending();h.cancel(e)}))}scheduleNotifications(){return Object(d.a)(this,void 0,void 0,(function*(){let e=parseInt(this.time.split(":")[0]),t=parseInt(this.time.split(":")[1]),n=[];var i=1;const o=yield this.translateService.get("BexTrack").toPromise(),a=yield this.translateService.get("Did you track your time for today?").toPromise();for(let d of Object.keys(this.weekdays))if(this.weekdays[d]){let r=parseInt(d.substring(1));n.push({id:i,title:o,text:a,foreground:!0,trigger:{every:{weekday:r,hour:e,minute:t}}}),i++}if(n.length>0)try{cordova.plugins.notification.local.schedule(n)}catch(r){console.error("Schedule Notifications",r)}}))}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](p.a),m["\u0275\u0275directiveInject"](u.a),m["\u0275\u0275directiveInject"](g.d))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-notification-settings"]],decls:52,vars:38,consts:[["color","primary"],["slot","start"],["mode","md","defaultHref","/tabs/settings"],["displayFormat","HH:mm",3,"ngModel","ngModelChange","ionChange"],["slot","end",3,"ngModel","ngModelChange","ionChange"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-header"),m["\u0275\u0275elementStart"](1,"ion-toolbar",0),m["\u0275\u0275elementStart"](2,"ion-buttons",1),m["\u0275\u0275element"](3,"ion-back-button",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"ion-title"),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"ion-content"),m["\u0275\u0275elementStart"](8,"ion-list"),m["\u0275\u0275elementStart"](9,"ion-list-header"),m["\u0275\u0275text"](10),m["\u0275\u0275pipe"](11,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"ion-item"),m["\u0275\u0275elementStart"](13,"ion-label"),m["\u0275\u0275text"](14),m["\u0275\u0275pipe"](15,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"ion-datetime",3),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.time=e}))("ionChange",(function(){return t.notificationsChanged()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"ion-item"),m["\u0275\u0275elementStart"](18,"ion-label"),m["\u0275\u0275text"](19),m["\u0275\u0275pipe"](20,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](21,"ion-checkbox",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.weekdays.d1=e}))("ionChange",(function(){return t.notificationsChanged()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"ion-item"),m["\u0275\u0275elementStart"](23,"ion-label"),m["\u0275\u0275text"](24),m["\u0275\u0275pipe"](25,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"ion-checkbox",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.weekdays.d2=e}))("ionChange",(function(){return t.notificationsChanged()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"ion-item"),m["\u0275\u0275elementStart"](28,"ion-label"),m["\u0275\u0275text"](29),m["\u0275\u0275pipe"](30,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"ion-checkbox",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.weekdays.d3=e}))("ionChange",(function(){return t.notificationsChanged()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](32,"ion-item"),m["\u0275\u0275elementStart"](33,"ion-label"),m["\u0275\u0275text"](34),m["\u0275\u0275pipe"](35,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](36,"ion-checkbox",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.weekdays.d4=e}))("ionChange",(function(){return t.notificationsChanged()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](37,"ion-item"),m["\u0275\u0275elementStart"](38,"ion-label"),m["\u0275\u0275text"](39),m["\u0275\u0275pipe"](40,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](41,"ion-checkbox",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.weekdays.d5=e}))("ionChange",(function(){return t.notificationsChanged()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](42,"ion-item"),m["\u0275\u0275elementStart"](43,"ion-label"),m["\u0275\u0275text"](44),m["\u0275\u0275pipe"](45,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](46,"ion-checkbox",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.weekdays.d6=e}))("ionChange",(function(){return t.notificationsChanged()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](47,"ion-item"),m["\u0275\u0275elementStart"](48,"ion-label"),m["\u0275\u0275text"](49),m["\u0275\u0275pipe"](50,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](51,"ion-checkbox",4),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.weekdays.d0=e}))("ionChange",(function(){return t.notificationsChanged()})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](6,18,"Notification settings")," "),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](11,20,"Time tracking reminder")),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](15,22,"Reminder time")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.time),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](20,24,"Monday")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.weekdays.d1),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](25,26,"Tuesday")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.weekdays.d2),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](30,28,"Wednesday")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.weekdays.d3),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](35,30,"Thursday")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.weekdays.d4),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](40,32,"Friday")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.weekdays.d5),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](45,34,"Saturday")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.weekdays.d6),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](50,36,"Sunday")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.weekdays.d0))},directives:[a.IonHeader,a.IonToolbar,a.IonButtons,a.IonBackButton,a.IonBackButtonDelegate,a.IonTitle,a.IonContent,a.IonList,a.IonListHeader,a.IonItem,a.IonLabel,a.IonDatetime,a.SelectValueAccessor,o.NgControlStatus,o.NgModel,a.IonCheckbox,a.BooleanValueAccessor],pipes:[g.c],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.i.forChild(f)],r.i]}),e})(),S=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,o.FormsModule,a.IonicModule,g.b,I]]}),e})()}}]);