"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4161],{4161:(y,l,r)=>{r.r(l),r.d(l,{LoadingPageModule:()=>A});var v=r(177),d=r(9417),h=r(3871),c=r(4742),i=r(467),g=r(5154),n=r(6996),u=r(6929),m=r(2872),f=r(9893);let p=(()=>{var t;class a{constructor(e,o,S,L){this.auth=e,this.apiService=o,this.navCtrl=S,this.utilsService=L}ngOnInit(){var e=this;return(0,i.A)(function*(){e.observer=e.auth.addActionListener(o=>e.actionHandler(o)),e.auth.loadTokenFromStorage().then((0,i.A)(function*(){e.auth.getValidToken().then((0,i.A)(function*(){e.initApiService()})).catch(()=>{e.auth.refreshToken().then((0,i.A)(function*(){e.initApiService()}))})}))})()}initApiService(){var e=this;return(0,i.A)(function*(){try{yield e.apiService.init(),e.navCtrl.navigateRoot("tabs")}catch(o){e.utilsService.showToast(o.error&&o.error.error_code&&403===o.error.error_code&&o.error.message&&"You are not allowed to access this ressource."===o.error.message?"no-time-permissions":o.error&&o.error.message?o.error.message:o.message?o.message:"Error: "+JSON.stringify(o)),e.navCtrl.navigateRoot("login")}})()}actionHandler(e){console.log("actionhandler",e),e.error&&e.action===g.AuthActions.LoadUserInfoFailed&&this.navCtrl.navigateRoot("login")}ngOnDestroy(){this.auth.removeActionObserver(this.observer)}}return(t=a).\u0275fac=function(e){return new(e||t)(n.rXU(g.AuthService),n.rXU(u.G),n.rXU(m.q9),n.rXU(f.T))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-loading"]],decls:2,vars:0,consts:[["color","primary"],["color","secondary",2,"position","absolute","left","40%","top","40%","width","20%","height","20%"]],template:function(e,o){1&e&&(n.j41(0,"ion-content",0),n.nrm(1,"ion-spinner",1),n.k0s())},dependencies:[c.W9,c.w2]}),a})(),A=(()=>{var t;class a{}return(t=a).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[v.MD,d.YN,c.bv,h.iI.forChild([{path:"",component:p}])]}),a})()}}]);