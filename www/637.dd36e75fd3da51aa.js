"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[637],{637:(w,g,c)=>{c.r(g),c.d(g,{ProjectsPageModule:()=>X});var p=c(177),f=c(9417),h=c(3871),r=c(4742),m=c(3955),j=c(5553),d=c(1683),u=c(467),a=c(8),e=c(6996),P=c(6929),v=c(5217);function T(t,s){if(1&t&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.LHq("",e.bMT(2,4,"Time estimated"),": ",null==i.object?null:i.object.spent_time_in_hours," / ",null==i.object?null:i.object.estimated_time_in_hours," ",e.bMT(3,6,"hours"),"")}}function R(t,s){if(1&t&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.E5c("",e.bMT(2,3,"Time spend"),": ",null==i.object?null:i.object.spent_time_in_hours," ",e.bMT(3,5,"hours"),"")}}function F(t,s){if(1&t&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.nI1(4,"number"),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.SjE("",e.bMT(2,5,"Time spend"),": ",null==i.object?null:i.object.spent_time_in_hours," / ",null==i.object?null:i.object.estimated_time_in_hours," ",e.bMT(3,7,"hours")," (",e.i5U(4,9,(null==i.object?null:i.object.spent_time_in_hours)/(null==i.object?null:i.object.estimated_time_in_hours)*100,"1.0-0"),"%)")}}let b=(()=>{var t;class s{constructor(){this.object=null}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-time-display"]],inputs:{object:"object"},decls:3,vars:3,consts:[[4,"ngIf"]],template:function(n,o){1&n&&(e.DNE(0,T,4,8,"p",0),e.DNE(1,R,4,7,"p",0),e.DNE(2,F,5,12,"p",0)),2&n&&(e.Y8G("ngIf",(null==o.object?null:o.object.estimated_time_in_hours)>0&&0==(null==o.object?null:o.object.spent_time_in_hours)),e.R7$(1),e.Y8G("ngIf",0==(null==o.object?null:o.object.estimated_time_in_hours)&&(null==o.object?null:o.object.spent_time_in_hours)>0),e.R7$(1),e.Y8G("ngIf",(null==o.object?null:o.object.estimated_time_in_hours)>0&&(null==o.object?null:o.object.spent_time_in_hours)>0))},dependencies:[p.bT,p.QX,m.D9],styles:["p[_ngcontent-%COMP%]{color:#0006}"]}),s})();const I=["sectionSelect"];function k(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-icon",15),e.bIt("click",function(o){e.eBV(i);const l=e.XpG();return e.Njj(l.toggleFilters(o))}),e.k0s()}}function E(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-icon",16),e.bIt("click",function(o){e.eBV(i);const l=e.XpG();return e.Njj(l.toggleFilters(o))}),e.k0s()}}function y(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-button",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.toggleFavorites())}),e.nrm(1,"ion-icon",18),e.k0s()}}function O(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-button",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.toggleFavorites())}),e.nrm(1,"ion-icon",19),e.k0s()}}function G(t,s){1&t&&(e.j41(0,"div")(1,"ion-item")(2,"ion-avatar",20),e.nrm(3,"ion-skeleton-text",21),e.k0s(),e.j41(4,"ion-label"),e.nrm(5,"ion-skeleton-text",22),e.k0s()()())}function C(t,s){if(1&t&&(e.j41(0,"ion-list"),e.DNE(1,G,6,0,"div",14),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngForOf",i.skeletons)}}function S(t,s){1&t&&e.nrm(0,"ion-icon",26)}function $(t,s){1&t&&e.nrm(0,"ion-icon",27)}function M(t,s){1&t&&(e.j41(0,"h1"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.JRh(e.bMT(2,1,"No projects found")))}function N(t,s){1&t&&(e.j41(0,"h1"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.JRh(e.bMT(2,1,"No favorite project found")))}function D(t,s){if(1&t&&(e.j41(0,"div",23)(1,"ion-grid")(2,"ion-row"),e.DNE(3,S,1,0,"ion-icon",24),e.DNE(4,$,1,0,"ion-icon",25),e.k0s(),e.j41(5,"ion-row"),e.DNE(6,M,3,3,"h1",12),e.DNE(7,N,3,3,"h1",12),e.k0s()()()),2&t){const i=e.XpG();e.R7$(3),e.Y8G("ngIf",!i.showOnlyFavorites),e.R7$(1),e.Y8G("ngIf",i.showOnlyFavorites),e.R7$(2),e.Y8G("ngIf",!i.showOnlyFavorites),e.R7$(1),e.Y8G("ngIf",i.showOnlyFavorites)}}function Y(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-item-option",33),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,l=e.XpG();return e.Njj(l.favorite(o.id))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Favorite"),""))}function V(t,s){if(1&t){const i=e.RV6();e.j41(0,"ion-item-option",33),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,l=e.XpG();return e.Njj(l.favorite(o.id))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"Unfavorite"),""))}function A(t,s){if(1&t&&(e.j41(0,"ion-item",28)(1,"ion-avatar",20),e.nrm(2,"img",34),e.k0s(),e.j41(3,"ion-label")(4,"h2"),e.EFF(5),e.k0s(),e.nrm(6,"app-time-display",29),e.k0s()()),2&t){const i=s.$implicit,n=e.XpG().$implicit;e.FCK("routerLink","/create-time/",n.id,"/",i.id,""),e.R7$(5),e.JRh(i.name),e.R7$(1),e.Y8G("object",i)}}function J(t,s){if(1&t&&(e.j41(0,"div")(1,"ion-item-sliding")(2,"ion-item",28)(3,"ion-label")(4,"h2"),e.EFF(5),e.k0s(),e.nrm(6,"app-time-display",29),e.k0s()(),e.j41(7,"ion-item-options",30),e.DNE(8,Y,3,3,"ion-item-option",31),e.DNE(9,V,3,3,"ion-item-option",31),e.k0s()(),e.DNE(10,A,7,4,"ion-item",32),e.k0s()),2&t){const i=s.$implicit,n=e.XpG();e.R7$(2),e.Mz_("routerLink","/create-time/",i.id,""),e.R7$(3),e.JRh(i.name),e.R7$(1),e.Y8G("object",i),e.R7$(2),e.Y8G("ngIf",-1==n.favorites.indexOf(i.id)),e.R7$(1),e.Y8G("ngIf",n.favorites.indexOf(i.id)>-1),e.R7$(1),e.Y8G("ngForOf",i.packages)}}let L=(()=>{var t;class s{constructor(n,o){this.apiService=n,this.storage=o,this.loading=!0,this.skeletons=new Array(30),this.projects=[],this.allProjects=[],this.showOnlyFavorites=!1,this.currentFilter="",this.searchString="",this.favorites=[],this.init()}init(){var n=this;return(0,u.A)(function*(){n.currentFilter=yield n.storage.getString(a.O3.PROJECTS_CURRENT_FILTER,a.zY.CURRENT_FILTER),n.showOnlyFavorites=yield n.storage.getBoolean(a.O3.PROJECTS_SHOW_FAVORITES,a.zY.SHOW_FAVORITES),n.favorites=JSON.parse(yield n.storage.getString(a.O3.PROJECTS_FAVORITES,JSON.stringify(a.zY.FAVORITES))),n.doRefresh(),n.apiService.projectsUpdated.subscribe((0,u.A)(function*(){n.allProjects=yield n.apiService.getProjects(),n.setActiveList()}))})()}doRefresh(n){var o=this;return(0,u.A)(function*(){o.loading=!0,yield o.apiService.getPackages(!0),n&&n.target.complete(),o.loading=!1})()}toggleFavorites(){var n=this;return(0,u.A)(function*(){n.showOnlyFavorites=!n.showOnlyFavorites,yield n.storage.setItem(a.O3.PROJECTS_SHOW_FAVORITES,n.showOnlyFavorites),n.setActiveList()})()}setActiveList(){this.projects=this.showOnlyFavorites?this.allProjects.filter(n=>this.favorites.indexOf(n.id)>-1):this.allProjects,"1"===this.currentFilter?this.projects=this.projects.filter(n=>n.packages.length>0):"2"===this.currentFilter&&(this.projects=this.projects.filter(n=>n.spent_time_in_hours>0)),this.searchString.length>0&&(this.projects=this.projects.filter(n=>n.name.toLocaleLowerCase().indexOf(this.searchString.toLocaleLowerCase())>-1))}favorite(n){-1===this.favorites.indexOf(n)?this.favorites.push(n):this.favorites=this.favorites.filter(o=>o!==n),this.storage.setItem(a.O3.PROJECTS_FAVORITES,JSON.stringify(this.favorites)),this.list.closeSlidingItems(),this.doRefresh()}toggleFilters(n){this.sectionSelect.open(n)}filterSet(n){this.currentFilter=n.detail.value,this.setActiveList(),this.storage.setItem(a.O3.PROJECTS_CURRENT_FILTER,this.currentFilter)}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(P.G),e.rXU(v.n))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-projects"]],viewQuery:function(n,o){if(1&n&&(e.GBs(r.nf,7),e.GBs(I,5)),2&n){let l;e.mGM(l=e.lsd())&&(o.list=l.first),e.mGM(l=e.lsd())&&(o.sectionSelect=l.first)}},decls:31,vars:24,consts:[["color","primary"],["slot","end"],["slot","icon-only","name","funnel-outline",3,"click",4,"ngIf"],["slot","icon-only","name","funnel",3,"click",4,"ngIf"],["interface","popover",2,"display","none",3,"ngModel","ionChange","ngModelChange"],["sectionSelect",""],["value",""],["value","1"],["value","2"],[3,"click",4,"ngIf"],["mode","ios","debounce","500",3,"placeholder","ngModel","ngModelChange","ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","no-items",4,"ngIf"],[4,"ngFor","ngForOf"],["slot","icon-only","name","funnel-outline",3,"click"],["slot","icon-only","name","funnel",3,"click"],[3,"click"],["slot","icon-only","name","star"],["slot","icon-only","name","star-outline"],["slot","start"],["animated",""],["animated","",2,"width","60%"],[1,"no-items"],["name","briefcase-outline",4,"ngIf"],["name","star-outline",4,"ngIf"],["name","briefcase-outline"],["name","star-outline"],[3,"routerLink"],[3,"object"],["side","end"],["color","warning",3,"click",4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],["color","warning",3,"click"],["src","/assets/package.png"]],template:function(n,o){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.DNE(3,k,1,0,"ion-icon",2),e.DNE(4,E,1,0,"ion-icon",3),e.j41(5,"ion-select",4,5),e.bIt("ionChange",function(_){return o.filterSet(_)})("ngModelChange",function(_){return o.currentFilter=_}),e.j41(7,"ion-select-option",6),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"ion-select-option",7),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"ion-select-option",8),e.EFF(14),e.nI1(15,"translate"),e.k0s()(),e.DNE(16,y,2,0,"ion-button",9),e.DNE(17,O,2,0,"ion-button",9),e.k0s(),e.j41(18,"ion-title"),e.EFF(19),e.nI1(20,"translate"),e.k0s()(),e.j41(21,"ion-toolbar")(22,"ion-searchbar",10),e.bIt("ngModelChange",function(_){return o.searchString=_})("ionChange",function(){return o.setActiveList()}),e.nI1(23,"translate"),e.k0s()()(),e.j41(24,"ion-content")(25,"ion-refresher",11),e.bIt("ionRefresh",function(_){return o.doRefresh(_)}),e.nrm(26,"ion-refresher-content"),e.k0s(),e.DNE(27,C,2,1,"ion-list",12),e.DNE(28,D,8,4,"div",13),e.j41(29,"ion-list"),e.DNE(30,J,11,6,"div",14),e.k0s()()),2&n&&(e.R7$(3),e.Y8G("ngIf",""===o.currentFilter),e.R7$(1),e.Y8G("ngIf",""!==o.currentFilter),e.R7$(1),e.Y8G("ngModel",o.currentFilter),e.R7$(3),e.JRh(e.bMT(9,14,"All")),e.R7$(3),e.JRh(e.bMT(12,16,"With Packages")),e.R7$(3),e.JRh(e.bMT(15,18,"With time spend")),e.R7$(2),e.Y8G("ngIf",o.showOnlyFavorites),e.R7$(1),e.Y8G("ngIf",!o.showOnlyFavorites),e.R7$(2),e.SpI(" ",e.bMT(20,20,"Projects")," "),e.R7$(3),e.Y8G("placeholder",e.bMT(23,22,"Projectname"))("ngModel",o.searchString),e.R7$(5),e.Y8G("ngIf",o.loading),e.R7$(1),e.Y8G("ngIf",0===o.projects.length),e.R7$(2),e.Y8G("ngForOf",o.projects))},dependencies:[r.mC,r.Jm,r.QW,r.W9,r.lO,r.eU,r.iq,r.uz,r.LU,r.CE,r.A7,r.he,r.nf,r.To,r.Ki,r.ln,r.S1,r.Nm,r.Ip,r.ds,r.BC,r.ai,r.Je,r.Gw,r.N7,p.Sq,p.bT,f.BC,f.vS,b,h.Wk,m.D9],styles:["ion-searchbar[_ngcontent-%COMP%]{padding:16px}ion-popover[_ngcontent-%COMP%]{--width: 300px}.no-items[_ngcontent-%COMP%]{text-align:center}"]}),s})(),X=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[r.bv,p.MD,f.YN,j.h,m.h,d.Y,h.iI.forChild([{path:"",component:L}])]}),s})()}}]);