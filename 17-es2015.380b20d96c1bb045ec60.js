(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"/2RN":function(e,t,n){"use strict";n.r(t),n.d(t,"DashboardPageModule",(function(){return k}));var a=n("ofXK"),i=n("3Pt+"),o=n("TEn/"),r=n("tyNb"),s=n("mrSG"),l=n("fXoL"),d=n("oZWX"),p=n("HPR3"),c=n("zQsl"),h=n("sYmb");const m=["width"];function u(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h1"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"number"),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind2"](2,1,e.totalHoursLastWeek,"1.0-2"))}}function f(e,t){1&e&&l["\u0275\u0275element"](0,"ion-skeleton-text",9)}function g(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h1"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"number"),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind2"](2,1,e.chargeabilityLastWeek,"1.0-0"),"%")}}function x(e,t){1&e&&l["\u0275\u0275element"](0,"ion-skeleton-text",9)}function S(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h1"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"number"),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind2"](2,1,e.totalHoursLastMonth,"1.0-2"))}}function v(e,t){1&e&&l["\u0275\u0275element"](0,"ion-skeleton-text",9)}function E(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"h1"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"number"),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind2"](2,1,e.chargeabilityLastMonth,"1.0-0"),"%")}}function I(e,t){1&e&&l["\u0275\u0275element"](0,"ion-skeleton-text",9)}function b(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",10),l["\u0275\u0275element"](1,"ngx-charts-pie-chart",11),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("view",e.view)("scheme",e.colorScheme)("results",e.data)("gradient",e.gradient)("legend",e.showLegend)("legendPosition",e.legendPosition)("labels",e.showLabels)("doughnut",e.isDoughnut)}}function y(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"h2"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](2,1,"No data available")))}const w=[{path:"",component:(()=>{class e{constructor(e,t){this.apiService=e,this.utils=t,this.view=null,this.timesheets=[],this.timesheetsLastWeek=[],this.timesheetsLastMonth=[],this.lastWeek=new Date(Date.now()-6048e5),this.lastMonth=new Date(Date.now()-2592e6),this.totalHoursLastWeek=0,this.payedHoursLastWeek=0,this.chargeabilityLastWeek=0,this.totalHoursLastMonth=0,this.payedHoursLastMonth=0,this.chargeabilityLastMonth=0,this.data=[],this.loading=!1,this.gradient=!1,this.showLegend=!0,this.showLabels=!1,this.isDoughnut=!1,this.legendPosition="left",this.colorScheme={domain:["#093948","#A2C003","#0085BA","#DCC521","#DB7C00","#C81919"]},this.projects={},this.doRefresh(),this.apiService.timesUpdated.subscribe(()=>this.doRefresh())}ionViewDidEnter(){let e=this.widthElement.el.scrollWidth;this.view=[e,e]}doRefresh(e,t=!1){return Object(s.a)(this,void 0,void 0,(function*(){this.loading=!0,this.data=[],setTimeout(()=>{this.calculateStatistics(),e&&e.target.complete(),this.loading=!1},1e3)}))}calculateStatistics(){return Object(s.a)(this,void 0,void 0,(function*(){this.timesheets=yield this.apiService.getMyTimesheets(),this.timesheetsLastWeek=this.timesheets.filter(e=>new Date(e.date)>=this.lastWeek),this.timesheetsLastMonth=this.timesheets.filter(e=>new Date(e.date)>=this.lastMonth),this.totalHoursLastWeek=this.timesheetsLastWeek.map(e=>this.utils.parseDuration(e.duration)).reduce((e,t)=>e+t,0),this.payedHoursLastWeek=this.timesheetsLastWeek.filter(e=>e.allowable_bill).map(e=>this.utils.parseDuration(e.duration)).reduce((e,t)=>e+t,0),this.chargeabilityLastWeek=this.payedHoursLastWeek>0?this.payedHoursLastWeek/this.totalHoursLastWeek*100:0,this.totalHoursLastMonth=this.timesheetsLastMonth.map(e=>this.utils.parseDuration(e.duration)).reduce((e,t)=>e+t,0),this.payedHoursLastMonth=this.timesheetsLastMonth.filter(e=>e.allowable_bill).map(e=>this.utils.parseDuration(e.duration)).reduce((e,t)=>e+t,0),this.chargeabilityLastMonth=this.payedHoursLastMonth>0?this.payedHoursLastMonth/this.totalHoursLastMonth*100:0;for(var e=0;e<this.timesheetsLastMonth.length;e++){let t=this.timesheetsLastMonth[e];t.project?t.project.name in this.projects?this.projects[t.project.name]+=this.utils.parseDuration(t.duration):this.projects[t.project.name]=this.utils.parseDuration(t.duration):"Unknown"in this.projects?this.projects.Unknown+=this.utils.parseDuration(t.duration):this.projects.Unknown=this.utils.parseDuration(t.duration)}let t=[];for(const[n,a]of Object.entries(this.projects))t.push({name:n,value:a});this.data=t}))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-dashboard"]],viewQuery:function(e,t){var n;1&e&&l["\u0275\u0275staticViewQuery"](m,!0),2&e&&l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.widthElement=n.first)},decls:79,vars:46,consts:[["color","primary"],["slot","fixed",3,"ionRefresh"],["size","6","size-md","3"],[4,"ngIf"],["animated","",4,"ngIf"],["size","12","size-md","6","size-lg","3"],["width",""],["id","pie-chart-parent",4,"ngIf"],["expand","full","onclick","window.open('https://feedback.bextrack.com', '_system', 'location=yes'); return false;"],["animated",""],["id","pie-chart-parent"],[3,"view","scheme","results","gradient","legend","legendPosition","labels","doughnut"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"ion-header"),l["\u0275\u0275elementStart"](1,"ion-toolbar",0),l["\u0275\u0275elementStart"](2,"ion-title"),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"ion-content"),l["\u0275\u0275elementStart"](6,"ion-refresher",1),l["\u0275\u0275listener"]("ionRefresh",(function(e){return t.doRefresh(e)})),l["\u0275\u0275element"](7,"ion-refresher-content"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"ion-grid"),l["\u0275\u0275elementStart"](9,"ion-row"),l["\u0275\u0275elementStart"](10,"ion-col",2),l["\u0275\u0275elementStart"](11,"ion-card"),l["\u0275\u0275elementStart"](12,"ion-card-header"),l["\u0275\u0275elementStart"](13,"ion-card-subtitle"),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"ion-card-title"),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"ion-card-content"),l["\u0275\u0275template"](20,u,3,4,"h1",3),l["\u0275\u0275template"](21,f,1,0,"ion-skeleton-text",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"ion-col",2),l["\u0275\u0275elementStart"](23,"ion-card"),l["\u0275\u0275elementStart"](24,"ion-card-header"),l["\u0275\u0275elementStart"](25,"ion-card-subtitle"),l["\u0275\u0275text"](26),l["\u0275\u0275pipe"](27,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"ion-card-title"),l["\u0275\u0275text"](29),l["\u0275\u0275pipe"](30,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](31,"ion-card-content"),l["\u0275\u0275template"](32,g,3,4,"h1",3),l["\u0275\u0275template"](33,x,1,0,"ion-skeleton-text",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](34,"ion-col",2),l["\u0275\u0275elementStart"](35,"ion-card"),l["\u0275\u0275elementStart"](36,"ion-card-header"),l["\u0275\u0275elementStart"](37,"ion-card-subtitle"),l["\u0275\u0275text"](38),l["\u0275\u0275pipe"](39,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](40,"ion-card-title"),l["\u0275\u0275text"](41),l["\u0275\u0275pipe"](42,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](43,"ion-card-content"),l["\u0275\u0275template"](44,S,3,4,"h1",3),l["\u0275\u0275template"](45,v,1,0,"ion-skeleton-text",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](46,"ion-col",2),l["\u0275\u0275elementStart"](47,"ion-card"),l["\u0275\u0275elementStart"](48,"ion-card-header"),l["\u0275\u0275elementStart"](49,"ion-card-subtitle"),l["\u0275\u0275text"](50),l["\u0275\u0275pipe"](51,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](52,"ion-card-title"),l["\u0275\u0275text"](53),l["\u0275\u0275pipe"](54,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](55,"ion-card-content"),l["\u0275\u0275template"](56,E,3,4,"h1",3),l["\u0275\u0275template"](57,I,1,0,"ion-skeleton-text",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](58,"ion-col",5),l["\u0275\u0275elementStart"](59,"ion-card"),l["\u0275\u0275elementStart"](60,"ion-card-header"),l["\u0275\u0275elementStart"](61,"ion-card-title",null,6),l["\u0275\u0275text"](63),l["\u0275\u0275pipe"](64,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](65,"ion-card-content"),l["\u0275\u0275template"](66,b,2,8,"div",7),l["\u0275\u0275template"](67,y,3,3,"h2",3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](68,"ion-col",5),l["\u0275\u0275elementStart"](69,"ion-card"),l["\u0275\u0275elementStart"](70,"ion-card-header"),l["\u0275\u0275elementStart"](71,"ion-card-title",null,6),l["\u0275\u0275text"](73),l["\u0275\u0275pipe"](74,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](75,"ion-card-content"),l["\u0275\u0275elementStart"](76,"ion-button",8),l["\u0275\u0275text"](77),l["\u0275\u0275pipe"](78,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,22,"Dashboard")," "),l["\u0275\u0275advance"](11),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](15,24,"7 days")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,26,"Hours")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!t.loading),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.loading),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](27,28,"7 days")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](30,30,"Billable")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!t.loading),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.loading),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](39,32,"30 days")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](42,34,"Hours")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!t.loading),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.loading),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](51,36,"30 days")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](54,38,"Billable")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!t.loading),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.loading),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](64,40,"Hours by Project")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",t.view&&t.data.length>0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",0===t.data.length),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](74,42,"missing-a-report")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](78,44,"Provide Feedback")))},directives:[o.IonHeader,o.IonToolbar,o.IonTitle,o.IonContent,o.IonRefresher,o.IonRefresherContent,o.IonGrid,o.IonRow,o.IonCol,o.IonCard,o.IonCardHeader,o.IonCardSubtitle,o.IonCardTitle,o.IonCardContent,a.NgIf,o.IonButton,o.IonSkeletonText,c.b],pipes:[h.c,a.DecimalPipe],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-size:xx-large;color:#000;font-weight:700}#pie-chart-parent[_ngcontent-%COMP%]{display:grid;min-height:400px}@media (min-width:820px){ion-grid[_ngcontent-%COMP%]{flex-direction:row-reverse}}ion-skeleton-text[_ngcontent-%COMP%]{width:50px;height:25px;margin:auto}ion-content[_ngcontent-%COMP%]{--padding-bottom:0;--padding-end:0;--padding-start:0;--padding-top:0}ion-card-title[_ngcontent-%COMP%]{font-size:24px;min-height:62px}"]}),e})()}];let L=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.i.forChild(w)],r.i]}),e})(),k=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.CommonModule,i.FormsModule,o.IonicModule,h.b,c.a,L]]}),e})()}}]);