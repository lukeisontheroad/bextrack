!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{AqnX:function(n,r,o){"use strict";o.r(r),o.d(r,"AuthCallbackPageModule",(function(){return m}));var i,a,s=o("ofXK"),c=o("3Pt+"),u=o("tyNb"),l=o("TEn/"),h=o("mrSG"),v=o("zEhZ"),d=o("fXoL"),f=o("oZWX"),p=o("HPR3"),g=[{path:"",component:(i=function(){function n(t,r,o,i,a){e(this,n),this.auth=t,this.apiService=r,this.utilsService=o,this.navCtrl=i,this.router=a}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){var e=this;this.observer=this.auth.addActionListener((function(t){return e.postCallback(t)})),this.auth.handleCallback(window.location.origin+this.router.url)}},{key:"ngOnDestroy",value:function(){this.auth.removeActionObserver(this.observer)}},{key:"postCallback",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.action!==v.AuthActions.SignInSuccess){t.next=10;break}return t.prev=1,t.next=4,this.apiService.init();case 4:this.navCtrl.navigateRoot("tabs"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.utilsService.showToast(t.t0.error&&t.t0.error.error_code&&403==t.t0.error.error_code&&t.t0.error.message&&"You are not allowed to access this ressource."==t.t0.error.message?"no-time-permissions":t.t0.error&&t.t0.error.message?t.t0.error.message:t.t0.message?t.t0.message:"Error: "+JSON.stringify(t.t0)),this.navCtrl.navigateRoot("login");case 10:e.action===v.AuthActions.SignInFailed&&(this.utilsService.showToast("sign-in-failed"),console.log("SignInFailed redirect to login"),this.navCtrl.navigateRoot("login"));case 11:case"end":return t.stop()}}),t,this,[[1,7]])})))}}])&&t(r.prototype,o),i&&t(r,i),n}(),i.\u0275fac=function(e){return new(e||i)(d["\u0275\u0275directiveInject"](v.AuthService),d["\u0275\u0275directiveInject"](f.a),d["\u0275\u0275directiveInject"](p.a),d["\u0275\u0275directiveInject"](l.NavController),d["\u0275\u0275directiveInject"](u.g))},i.\u0275cmp=d["\u0275\u0275defineComponent"]({type:i,selectors:[["app-auth-callback"]],decls:2,vars:0,consts:[["color","primary"],["color","secondary",2,"position","absolute","left","40%","top","40%","width","20%","height","20%"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"ion-content",0),d["\u0275\u0275element"](1,"ion-spinner",1),d["\u0275\u0275elementEnd"]())},directives:[l.IonContent,l.IonSpinner],styles:[""]}),i)}],m=((a=function t(){e(this,t)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:a}),a.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||a)},imports:[[s.CommonModule,c.FormsModule,l.IonicModule,u.i.forChild(g)]]}),a)}}])}();