(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"zk+T":function(e,t,n){"use strict";n.r(t),n.d(t,"TimesPageModule",(function(){return w}));var i=n("TEn/"),o=n("tyNb"),a=n("ofXK"),l=n("3Pt+"),r=n("mrSG"),d=n("HPR3"),s=n("u1pB"),m=n("fXoL"),c=n("oZWX"),p=n("zTSL"),u=n("sYmb");let h=(()=>{class e{transform(e,...t){if(null===e||""===e)return"00:00";const n=e.split(":");return d.a.pad(n[0])+":"+d.a.pad(n[1])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m["\u0275\u0275definePipe"]({name:"formatDuration",type:e,pure:!0}),e})();function f(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"ion-list-header"),m["\u0275\u0275elementStart"](2,"ion-label"),m["\u0275\u0275element"](3,"ion-skeleton-text",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"p",15),m["\u0275\u0275element"](5,"ion-skeleton-text",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"ion-item",17),m["\u0275\u0275elementStart"](7,"ion-thumbnail",18),m["\u0275\u0275element"](8,"ion-skeleton-text",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"ion-label"),m["\u0275\u0275elementStart"](10,"h2"),m["\u0275\u0275element"](11,"ion-skeleton-text",19),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"p"),m["\u0275\u0275element"](13,"ion-skeleton-text",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"p",21),m["\u0275\u0275element"](15,"ion-skeleton-text",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())}function g(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-list"),m["\u0275\u0275template"](1,f,16,0,"div",10),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",e.skeletons)}}function S(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",22),m["\u0275\u0275elementStart"](1,"ion-grid"),m["\u0275\u0275elementStart"](2,"ion-row"),m["\u0275\u0275element"](3,"ion-icon",23),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"ion-row"),m["\u0275\u0275elementStart"](5,"h1"),m["\u0275\u0275text"](6),m["\u0275\u0275pipe"](7,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](7,1,"No times found")))}function v(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-avatar",18),m["\u0275\u0275element"](1,"img",31),m["\u0275\u0275elementEnd"]())}function I(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-avatar",18),m["\u0275\u0275element"](1,"img",32),m["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-item-sliding"),m["\u0275\u0275elementStart"](1,"ion-item",25),m["\u0275\u0275template"](2,v,2,0,"ion-avatar",26),m["\u0275\u0275template"](3,I,2,0,"ion-avatar",26),m["\u0275\u0275elementStart"](4,"ion-label"),m["\u0275\u0275elementStart"](5,"h2"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"p"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"p"),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"p",27),m["\u0275\u0275text"](12),m["\u0275\u0275pipe"](13,"formatDuration"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"ion-item-options",28),m["\u0275\u0275elementStart"](15,"ion-item-option",29),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](e);const n=t.$implicit;return m["\u0275\u0275nextContext"](2).copy(n)})),m["\u0275\u0275text"](16),m["\u0275\u0275pipe"](17,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"ion-item-option",30),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](e);const n=t.$implicit;return m["\u0275\u0275nextContext"](2).delete(n)})),m["\u0275\u0275text"](19),m["\u0275\u0275pipe"](20,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275propertyInterpolate1"]("routerLink","/display-time/",e.id,""),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",e.allowable_bill),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!e.allowable_bill),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"]("",null==e||null==e.project?null:e.project.name," "),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](null==e||null==e.package?null:e.package.name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](null==e?null:e.text),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](13,9,null==e?null:e.duration)),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](17,11,"Copy")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](20,13,"Delete"))}}function E(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"ion-list-header",24),m["\u0275\u0275elementStart"](2,"ion-label"),m["\u0275\u0275text"](3),m["\u0275\u0275pipe"](4,"date"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"p"),m["\u0275\u0275text"](6),m["\u0275\u0275pipe"](7,"toDuration"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](8,y,21,15,"ion-item-sliding",10),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("id",e.date),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](4,4,e.date,"EEEE dd.MM.yyyy")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](7,7,e.total)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",e.times)}}let x=(()=>{class e{constructor(e,t){this.apiService=e,this.utils=t,this.times=[],this.groupedTimes=[],this.skeletons=new Array(12),this.loading=!0,this.optionsMulti={color:"secondary",weekStart:1},this.apiService.timesUpdated.subscribe(()=>{this.updateTimes(!1)}),this.doRefresh(null,!0),this.apiService.getPackages()}updateTimes(e){return Object(r.a)(this,void 0,void 0,(function*(){let t=[],n=new Array;this.times=yield this.apiService.getMyTimesheets(e);var i={};for(let e of this.times)i[e.date]||(i[e.date]=[]),i[e.date].push(e);for(let e of Object.keys(i)){const o=i[e].map(e=>this.utils.parseDuration(e.duration)).reduce((e,t)=>e+t);t.push({date:i[e][0].date,times:i[e],total:o}),n.push({date:new Date(i[e][0].date),subTitle:(new s.a).transform(o),disable:!1,cssClass:"green"})}this.groupedTimes=t,this.optionsMulti={from:new Date(this.times[this.times.length-1].date),to:new Date(this.times[0].date),pickMode:"single",daysConfig:n,color:"secondary",weekStart:1}}))}doRefresh(e,t=!1){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,this.updateTimes(!0),e&&e.target.complete(),setTimeout(()=>{this.loading=!1},1e3)}))}delete(e){return Object(r.a)(this,void 0,void 0,(function*(){(yield this.utils.confirm("Are you sure?","Delete "+e.date+" "+e.duration+" "+e.text))?(yield this.apiService.deleteTimesheet(e.id),this.utils.showToast("Deleted"),this.doRefresh()):this.list.closeSlidingItems()}))}copy(e){return Object(r.a)(this,void 0,void 0,(function*(){e.id=null,this.apiService.postTimesheet(e)}))}passedDate(e){const t=new Date(e.time),n=t.getFullYear()+"-"+d.a.pad(t.getMonth()+1)+"-"+d.a.pad(t.getDate());this.scrollTo(n)}scrollTo(e){let t=document.getElementById(e).offsetTop;this.content.scrollToPoint(0,t,500)}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-times"]],viewQuery:function(e,t){var n;1&e&&(m["\u0275\u0275viewQuery"](i.IonContent,!0),m["\u0275\u0275staticViewQuery"](i.IonList,!0)),2&e&&(m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.content=n.first),m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.list=n.first))},decls:20,vars:10,consts:[[1,"ion-no-border"],["color","primary"],[1,"tablet"],[1,"ion-justify-content-start"],["size","12","size-md","4",1,"col-calendar"],["sticky","",3,"ngModel","options","type","format","ngModelChange","select"],["size","12","size-md","8",1,"col-content"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","no-items",4,"ngIf"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["routerLink","/create-time/","color","secondary"],["name","add"],["animated","",2,"width","30%"],[2,"width","50px"],["animated",""],["lines","none"],["slot","start"],["animated","",2,"width","70%"],["animated","",2,"width","50%"],["slot","end",2,"width","35px"],[1,"no-items"],["name","timer-outline"],[2,"font-weight","500",3,"id"],["lines","none",3,"routerLink"],["slot","start",4,"ngIf"],["slot","end"],["side","end"],["color","primary",3,"click"],["color","danger",3,"click"],["src","/assets/paid.png"],["src","/assets/free.png"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-header",0),m["\u0275\u0275elementStart"](1,"ion-toolbar",1),m["\u0275\u0275elementStart"](2,"ion-title"),m["\u0275\u0275text"](3),m["\u0275\u0275pipe"](4,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"ion-grid",2),m["\u0275\u0275elementStart"](6,"ion-row",3),m["\u0275\u0275elementStart"](7,"ion-col",4),m["\u0275\u0275elementStart"](8,"ion-calendar",5),m["\u0275\u0275listener"]("ngModelChange",(function(e){return t.date=e}))("select",(function(e){return t.passedDate(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"ion-col",6),m["\u0275\u0275elementStart"](10,"ion-content"),m["\u0275\u0275elementStart"](11,"ion-refresher",7),m["\u0275\u0275listener"]("ionRefresh",(function(e){return t.doRefresh(e)})),m["\u0275\u0275element"](12,"ion-refresher-content"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](13,g,2,1,"ion-list",8),m["\u0275\u0275template"](14,S,8,3,"div",9),m["\u0275\u0275elementStart"](15,"ion-list"),m["\u0275\u0275template"](16,E,9,9,"div",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"ion-fab",11),m["\u0275\u0275elementStart"](18,"ion-fab-button",12),m["\u0275\u0275element"](19,"ion-icon",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](4,8,"Times")," "),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.date)("options",t.optionsMulti)("type",t.type)("format","YYYY-MM-DD"),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngIf",t.loading),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0===t.times.length&&!t.loading),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",t.groupedTimes))},directives:[i.IonHeader,i.IonToolbar,i.IonTitle,i.IonGrid,i.IonRow,i.IonCol,p.CalendarComponent,l.NgControlStatus,l.NgModel,i.IonContent,i.IonRefresher,i.IonRefresherContent,a.NgIf,i.IonList,a.NgForOf,i.IonFab,i.IonFabButton,i.RouterLinkDelegate,o.h,i.IonIcon,i.IonListHeader,i.IonLabel,i.IonSkeletonText,i.IonItem,i.IonThumbnail,i.IonItemSliding,i.IonItemOptions,i.IonItemOption,i.IonAvatar],pipes:[u.c,a.DatePipe,s.a,h],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:translucent}ion-list-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-right:16px}ion-calendar[_ngcontent-%COMP%]{background:#3b6c7a}.col-calendar[_ngcontent-%COMP%]{background-color:#3b6c7a;min-height:370px}@media (max-width:767px){.col-content[_ngcontent-%COMP%]{height:calc(100% - 370px)}}@media (max-height:390px){ion-header[_ngcontent-%COMP%]{display:none}}.tablet[_ngcontent-%COMP%]{margin:0;--ion-grid-padding:0px}.tablet[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0}.tablet[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}  .alert-wrapper{--min-width:80%}"]}),e})();var b=n("iTUp");let w=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.IonicModule,a.CommonModule,l.FormsModule,b.a,u.b,p.CalendarModule,o.i.forChild([{path:"",component:x}])]]}),e})()}}]);