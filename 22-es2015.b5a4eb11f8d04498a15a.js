(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"0B1/":function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectsPageModule",(function(){return B}));var i=n("TEn/"),o=n("tyNb"),r=n("ofXK"),l=n("3Pt+"),a=n("mrSG"),s=n("TCge"),c=n("fXoL"),p=n("oZWX"),d=n("E2f4"),m=n("sYmb");function u(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"p"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate4"]("",c["\u0275\u0275pipeBind1"](2,4,"Time estimated"),": ",null==e.object?null:e.object.spent_time_in_hours," / ",null==e.object?null:e.object.estimated_time_in_hours," ",c["\u0275\u0275pipeBind1"](3,6,"hours"),"")}}function f(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"p"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate3"]("",c["\u0275\u0275pipeBind1"](2,3,"Time spend"),": ",null==e.object?null:e.object.spent_time_in_hours," ",c["\u0275\u0275pipeBind1"](3,5,"hours"),"")}}function h(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"p"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275pipe"](3,"translate"),c["\u0275\u0275pipe"](4,"number"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate5"]("",c["\u0275\u0275pipeBind1"](2,5,"Time spend"),": ",null==e.object?null:e.object.spent_time_in_hours," / ",null==e.object?null:e.object.estimated_time_in_hours," ",c["\u0275\u0275pipeBind1"](3,7,"hours")," (",c["\u0275\u0275pipeBind2"](4,9,(null==e.object?null:e.object.spent_time_in_hours)/(null==e.object?null:e.object.estimated_time_in_hours)*100,"1.0-0"),"%)")}}let g=(()=>{class e{constructor(){this.object=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-time-display"]],inputs:{object:"object"},decls:3,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(c["\u0275\u0275template"](0,u,4,8,"p",0),c["\u0275\u0275template"](1,f,4,7,"p",0),c["\u0275\u0275template"](2,h,5,12,"p",0)),2&e&&(c["\u0275\u0275property"]("ngIf",(null==t.object?null:t.object.estimated_time_in_hours)>0&&0==(null==t.object?null:t.object.spent_time_in_hours)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0==(null==t.object?null:t.object.estimated_time_in_hours)&&(null==t.object?null:t.object.spent_time_in_hours)>0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",(null==t.object?null:t.object.estimated_time_in_hours)>0&&(null==t.object?null:t.object.spent_time_in_hours)>0))},directives:[r.NgIf],pipes:[m.c,r.DecimalPipe],styles:["p[_ngcontent-%COMP%]{color:rgba(0,0,0,.4)}"]}),e})();const v=["sectionSelect"];function S(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-icon",15),c["\u0275\u0275listener"]("click",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().toggleFilters(t)})),c["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-icon",16),c["\u0275\u0275listener"]("click",(function(t){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().toggleFilters(t)})),c["\u0275\u0275elementEnd"]()}}function y(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-button",17),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().toggleFavorites()})),c["\u0275\u0275element"](1,"ion-icon",18),c["\u0275\u0275elementEnd"]()}}function b(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-button",17),c["\u0275\u0275listener"]("click",(function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"]().toggleFavorites()})),c["\u0275\u0275element"](1,"ion-icon",19),c["\u0275\u0275elementEnd"]()}}function x(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"ion-item"),c["\u0275\u0275elementStart"](2,"ion-avatar",20),c["\u0275\u0275element"](3,"ion-skeleton-text",21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"ion-label"),c["\u0275\u0275element"](5,"ion-skeleton-text",22),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"ion-list"),c["\u0275\u0275template"](1,x,6,0,"div",14),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.skeletons)}}function E(e,t){1&e&&c["\u0275\u0275element"](0,"ion-icon",26)}function _(e,t){1&e&&c["\u0275\u0275element"](0,"ion-icon",27)}function C(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h1"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,"No projects found")))}function O(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h1"),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](2,1,"No favorite project found")))}function F(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",23),c["\u0275\u0275elementStart"](1,"ion-grid"),c["\u0275\u0275elementStart"](2,"ion-row"),c["\u0275\u0275template"](3,E,1,0,"ion-icon",24),c["\u0275\u0275template"](4,_,1,0,"ion-icon",25),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"ion-row"),c["\u0275\u0275template"](6,C,3,3,"h1",12),c["\u0275\u0275template"](7,O,3,3,"h1",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",!e.showOnlyFavorites),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.showOnlyFavorites),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!e.showOnlyFavorites),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.showOnlyFavorites)}}function w(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-item-option",33),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().favorite(t.id)})),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()}2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](2,1,"Favorite"),""))}function R(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-item-option",33),c["\u0275\u0275listener"]("click",(function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"]().favorite(t.id)})),c["\u0275\u0275text"](1),c["\u0275\u0275pipe"](2,"translate"),c["\u0275\u0275elementEnd"]()}2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](2,1,"Unfavorite"),""))}function k(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"ion-item",28),c["\u0275\u0275elementStart"](1,"ion-avatar",20),c["\u0275\u0275element"](2,"img",34),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"ion-label"),c["\u0275\u0275elementStart"](4,"h2"),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](6,"app-time-display",29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275propertyInterpolate2"]("routerLink","/create-time/",n.id,"/",e.id,""),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("object",e)}}function T(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"ion-item-sliding"),c["\u0275\u0275elementStart"](2,"ion-item",28),c["\u0275\u0275elementStart"](3,"ion-label"),c["\u0275\u0275elementStart"](4,"h2"),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](6,"app-time-display",29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"ion-item-options",30),c["\u0275\u0275template"](8,w,3,3,"ion-item-option",31),c["\u0275\u0275template"](9,R,3,3,"ion-item-option",31),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,k,7,4,"ion-item",32),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275propertyInterpolate1"]("routerLink","/create-time/",e.id,""),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("object",e),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",-1==n.favorites.indexOf(e.id)),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",n.favorites.indexOf(e.id)>-1),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngForOf",e.packages)}}let P=(()=>{class e{constructor(e,t){this.apiService=e,this.storage=t,this.loading=!0,this.skeletons=new Array(30),this.projects=[],this.allProjects=[],this.showOnlyFavorites=!1,this.currentFilter="",this.searchString="",this.favorites=[],this.init()}init(){return Object(a.a)(this,void 0,void 0,(function*(){this.currentFilter=yield this.storage.getString(s.b.PROJECTS_CURRENT_FILTER,s.a.CURRENT_FILTER),this.showOnlyFavorites=yield this.storage.getBoolean(s.b.PROJECTS_SHOW_FAVORITES,s.a.SHOW_FAVORITES),this.favorites=JSON.parse(yield this.storage.getString(s.b.PROJECTS_FAVORITES,JSON.stringify(s.a.FAVORITES))),this.doRefresh(),this.apiService.projectsUpdated.subscribe(()=>Object(a.a)(this,void 0,void 0,(function*(){this.allProjects=yield this.apiService.getProjects(),this.setActiveList()})))}))}doRefresh(e){return Object(a.a)(this,void 0,void 0,(function*(){this.loading=!0,yield this.apiService.getPackages(!0),e&&e.target.complete(),this.loading=!1}))}toggleFavorites(){return Object(a.a)(this,void 0,void 0,(function*(){this.showOnlyFavorites=!this.showOnlyFavorites,yield this.storage.setItem(s.b.PROJECTS_SHOW_FAVORITES,this.showOnlyFavorites),this.setActiveList()}))}setActiveList(){this.projects=this.showOnlyFavorites?this.allProjects.filter(e=>this.favorites.indexOf(e.id)>-1):this.allProjects,"1"===this.currentFilter?this.projects=this.projects.filter(e=>e.packages.length>0):"2"===this.currentFilter&&(this.projects=this.projects.filter(e=>e.spent_time_in_hours>0)),this.searchString.length>0&&(this.projects=this.projects.filter(e=>e.name.toLocaleLowerCase().indexOf(this.searchString.toLocaleLowerCase())>-1))}favorite(e){-1===this.favorites.indexOf(e)?this.favorites.push(e):this.favorites=this.favorites.filter(t=>t!==e),this.storage.setItem(s.b.PROJECTS_FAVORITES,JSON.stringify(this.favorites)),this.list.closeSlidingItems(),this.doRefresh()}toggleFilters(e){this.sectionSelect.open(e)}filterSet(e){this.currentFilter=e.detail.value,this.setActiveList(),this.storage.setItem(s.b.PROJECTS_CURRENT_FILTER,this.currentFilter)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](p.a),c["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-projects"]],viewQuery:function(e,t){var n;1&e&&(c["\u0275\u0275staticViewQuery"](i.IonList,!0),c["\u0275\u0275viewQuery"](v,!0)),2&e&&(c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.list=n.first),c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.sectionSelect=n.first))},decls:31,vars:24,consts:[["color","primary"],["slot","end"],["slot","icon-only","name","funnel-outline",3,"click",4,"ngIf"],["slot","icon-only","name","funnel",3,"click",4,"ngIf"],["interface","popover",2,"display","none",3,"ngModel","ionChange","ngModelChange"],["sectionSelect",""],["value",""],["value","1"],["value","2"],[3,"click",4,"ngIf"],["mode","ios","debounce","500",3,"placeholder","ngModel","ngModelChange","ionChange"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","no-items",4,"ngIf"],[4,"ngFor","ngForOf"],["slot","icon-only","name","funnel-outline",3,"click"],["slot","icon-only","name","funnel",3,"click"],[3,"click"],["slot","icon-only","name","star"],["slot","icon-only","name","star-outline"],["slot","start"],["animated",""],["animated","",2,"width","60%"],[1,"no-items"],["name","briefcase-outline",4,"ngIf"],["name","star-outline",4,"ngIf"],["name","briefcase-outline"],["name","star-outline"],[3,"routerLink"],[3,"object"],["side","end"],["color","warning",3,"click",4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],["color","warning",3,"click"],["src","/assets/package.png"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"ion-header"),c["\u0275\u0275elementStart"](1,"ion-toolbar",0),c["\u0275\u0275elementStart"](2,"ion-buttons",1),c["\u0275\u0275template"](3,S,1,0,"ion-icon",2),c["\u0275\u0275template"](4,I,1,0,"ion-icon",3),c["\u0275\u0275elementStart"](5,"ion-select",4,5),c["\u0275\u0275listener"]("ionChange",(function(e){return t.filterSet(e)}))("ngModelChange",(function(e){return t.currentFilter=e})),c["\u0275\u0275elementStart"](7,"ion-select-option",6),c["\u0275\u0275text"](8),c["\u0275\u0275pipe"](9,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"ion-select-option",7),c["\u0275\u0275text"](11),c["\u0275\u0275pipe"](12,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"ion-select-option",8),c["\u0275\u0275text"](14),c["\u0275\u0275pipe"](15,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](16,y,2,0,"ion-button",9),c["\u0275\u0275template"](17,b,2,0,"ion-button",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"ion-title"),c["\u0275\u0275text"](19),c["\u0275\u0275pipe"](20,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](21,"ion-toolbar"),c["\u0275\u0275elementStart"](22,"ion-searchbar",10),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchString=e}))("ionChange",(function(){return t.setActiveList()})),c["\u0275\u0275pipe"](23,"translate"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"ion-content"),c["\u0275\u0275elementStart"](25,"ion-refresher",11),c["\u0275\u0275listener"]("ionRefresh",(function(e){return t.doRefresh(e)})),c["\u0275\u0275element"](26,"ion-refresher-content"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](27,j,2,1,"ion-list",12),c["\u0275\u0275template"](28,F,8,4,"div",13),c["\u0275\u0275elementStart"](29,"ion-list"),c["\u0275\u0275template"](30,T,11,6,"div",14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",""==t.currentFilter),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",""!=t.currentFilter),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngModel",t.currentFilter),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](9,14,"All")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](12,16,"With Packages")),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](15,18,"With time spend")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.showOnlyFavorites),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.showOnlyFavorites),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" ",c["\u0275\u0275pipeBind1"](20,20,"Projects")," "),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("placeholder",c["\u0275\u0275pipeBind1"](23,22,"Projectname"))("ngModel",t.searchString),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",0===t.projects.length),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",t.projects))},directives:[i.IonHeader,i.IonToolbar,i.IonButtons,r.NgIf,i.IonSelect,i.SelectValueAccessor,l.NgControlStatus,l.NgModel,i.IonSelectOption,i.IonTitle,i.IonSearchbar,i.TextValueAccessor,i.IonContent,i.IonRefresher,i.IonRefresherContent,i.IonList,r.NgForOf,i.IonIcon,i.IonButton,i.IonItem,i.IonAvatar,i.IonSkeletonText,i.IonLabel,i.IonGrid,i.IonRow,i.IonItemSliding,i.RouterLinkDelegate,o.h,g,i.IonItemOptions,i.IonItemOption],pipes:[m.c],styles:["ion-searchbar[_ngcontent-%COMP%]{padding:16px}ion-popover[_ngcontent-%COMP%]{--width:300px}.no-items[_ngcontent-%COMP%]{text-align:center}"]}),e})();var V=n("iTUp"),L=n("j1ZV");let B=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.IonicModule,r.CommonModule,l.FormsModule,L.a,m.b,V.a,o.i.forChild([{path:"",component:P}])]]}),e})()}}]);