(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{XRIH:function(e,t,i){"use strict";i.r(t),i.d(t,"LoadingPageModule",(function(){return v}));var o=i("ofXK"),r=i("3Pt+"),n=i("TEn/"),s=i("mrSG"),a=i("zEhZ"),c=i("fXoL"),h=i("oZWX"),d=i("HPR3");let l=(()=>{class e{constructor(e,t,i,o){this.auth=e,this.apiService=t,this.navCtrl=i,this.utilsService=o}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){this.observer=this.auth.addActionListener(e=>this.actionHandler(e)),this.auth.loadTokenFromStorage().then(e=>Object(s.a)(this,void 0,void 0,(function*(){this.auth.getValidToken().then(()=>Object(s.a)(this,void 0,void 0,(function*(){this.initApiService()}))).catch(()=>{this.auth.refreshToken().then(e=>Object(s.a)(this,void 0,void 0,(function*(){this.initApiService()})))})})))}))}initApiService(){return Object(s.a)(this,void 0,void 0,(function*(){try{yield this.apiService.init(),this.navCtrl.navigateRoot("tabs")}catch(e){this.utilsService.showToast(e.error&&e.error.error_code&&403==e.error.error_code&&e.error.message&&"You are not allowed to access this ressource."==e.error.message?"no-time-permissions":e.error&&e.error.message?e.error.message:e.message?e.message:"Error: "+JSON.stringify(e)),this.navCtrl.navigateRoot("login")}}))}actionHandler(e){console.log("actionhandler",e),e.error&&e.action===a.AuthActions.LoadUserInfoFailed&&this.navCtrl.navigateRoot("login")}ngOnDestroy(){this.auth.removeActionObserver(this.observer)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](a.AuthService),c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](n.NavController),c["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading"]],decls:2,vars:0,consts:[["color","primary"],["color","secondary",2,"position","absolute","left","40%","top","40%","width","20%","height","20%"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"ion-content",0),c["\u0275\u0275element"](1,"ion-spinner",1),c["\u0275\u0275elementEnd"]())},directives:[n.IonContent,n.IonSpinner],styles:[""]}),e})();var u=i("tyNb");let v=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.FormsModule,n.IonicModule,u.i.forChild([{path:"",component:l}])]]}),e})()}}]);