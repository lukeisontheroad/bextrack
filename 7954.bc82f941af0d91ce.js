"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7954],{7954:(C,u,o)=>{o.r(u),o.d(u,{LoadingPageModule:()=>S});var v=o(6895),h=o(4006),a=o(8058),i=o(5861),d=o(3790),r=o(8274),g=o(5146),f=o(9265);let m=(()=>{class n{constructor(e,t,c,l){this.auth=e,this.apiService=t,this.navCtrl=c,this.utilsService=l}ngOnInit(){var e=this;return(0,i.Z)(function*(){e.observer=e.auth.addActionListener(t=>e.actionHandler(t)),e.auth.loadTokenFromStorage().then(function(){var t=(0,i.Z)(function*(c){e.auth.getValidToken().then((0,i.Z)(function*(){e.initApiService()})).catch(()=>{e.auth.refreshToken().then(function(){var l=(0,i.Z)(function*(y){e.initApiService()});return function(y){return l.apply(this,arguments)}}())})});return function(c){return t.apply(this,arguments)}}())})()}initApiService(){var e=this;return(0,i.Z)(function*(){try{yield e.apiService.init(),e.navCtrl.navigateRoot("tabs")}catch(t){e.utilsService.showToast(t.error&&t.error.error_code&&403==t.error.error_code&&t.error.message&&"You are not allowed to access this ressource."==t.error.message?"no-time-permissions":t.error&&t.error.message?t.error.message:t.message?t.message:"Error: "+JSON.stringify(t)),e.navCtrl.navigateRoot("login")}})()}actionHandler(e){console.log("actionhandler",e),e.error&&e.action===d.AuthActions.LoadUserInfoFailed&&this.navCtrl.navigateRoot("login")}ngOnDestroy(){this.auth.removeActionObserver(this.observer)}}return n.\u0275fac=function(e){return new(e||n)(r.\u0275\u0275directiveInject(d.AuthService),r.\u0275\u0275directiveInject(g.s),r.\u0275\u0275directiveInject(a.NavController),r.\u0275\u0275directiveInject(f.F))},n.\u0275cmp=r.\u0275\u0275defineComponent({type:n,selectors:[["app-loading"]],decls:2,vars:0,consts:[["color","primary"],["color","secondary",2,"position","absolute","left","40%","top","40%","width","20%","height","20%"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"ion-content",0),r.\u0275\u0275element(1,"ion-spinner",1),r.\u0275\u0275elementEnd())},dependencies:[a.IonContent,a.IonSpinner]}),n})();var p=o(2835);let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=r.\u0275\u0275defineInjector({imports:[v.CommonModule,h.FormsModule,a.IonicModule,p.Bz.forChild([{path:"",component:m}])]}),n})()}}]);