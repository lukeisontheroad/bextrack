{"version":3,"file":"default-src_app_services_api_api_service_ts.js","mappings":"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","sources":["./src/app/services/api/api.service.ts","./src/app/services/utils/utils.service.ts"],"sourcesContent":["import { EventEmitter, Injectable, Output } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AuthActions, AuthService } from 'ionic-appauth';\nimport { ClientService } from 'src/app/models/client_service';\nimport { Project } from 'src/app/models/project';\nimport { Timesheet } from 'src/app/models/timesheet';\nimport { TimesheetStatus } from 'src/app/models/timsheet_status';\nimport { User } from 'src/app/models/user';\nimport { Package } from 'src/app/models/package';\nimport { Contact } from 'src/app/models/contact';\nimport { UtilsService } from '../utils/utils.service';\nimport { DatePipe } from '@angular/common';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n\n  @Output()\n  timesUpdated = new EventEmitter();\n\n  @Output()\n  projectsUpdated = new EventEmitter();\n\n  @Output()\n  contactsUpdated = new EventEmitter();\n\n  private limit = 1000\n  private corsProxy = 'https://cors.bextrack.com/'\n  private baseUrl = this.corsProxy + 'https://api.bexio.com/'\n\n  private currentUser: User;\n  private users: User[] = []\n  private usersMap: any = {};\n  private projects: Project[] = []\n  private contacts: Contact[] = []\n  private projectMap: any = {};\n  private timesheets: Timesheet[] = []\n  private timesheetStatus: TimesheetStatus[] = []\n  private clientServicees: ClientService[] = []\n\n  private packages: Package[] = []\n  private cachedPackagesProjectId: any = {};\n  private cachedPackagesPackageId: any = {};\n\n  constructor(\n    private http: HttpClient,\n    private authService: AuthService,\n    private utilsService: UtilsService\n  ) { }\n\n  public async init() {\n    return new Promise<void>((resolve, reject) => {\n      let observer = this.authService.addActionListener(async (action) => {\n        if (action.action === AuthActions.LoadUserInfoSuccess) {\n          this.users = await this.http.get<any>(this.baseUrl + '3.0/users').toPromise()\n          for (var i = 0; i < this.users.length; i++) {\n            this.usersMap[this.users[i].id] = this.users[i]\n          }\n\n          try {\n            await Promise.all([\n              this.getTimesheetStatus(true),\n              this.getClientService(true),\n              this.getProjects(true),\n              // this.getContacts(true)\n            ]);\n\n            // this.getPackages()\n\n            for (var i = 0; i < this.users.length; i++) {\n              if (this.users[i].email === action.user.email) {\n                this.currentUser = this.users[i]\n                this.authService.removeActionObserver(observer)\n                resolve()\n              }\n            }\n          } catch (error) {\n            reject(error)\n          }\n        }\n      })\n      this.authService.loadUserInfo()\n    })\n  }\n\n  public async getContacts(force = false): Promise<Contact[]> {\n    return new Promise(async (resolve, reject) => {\n      if (force || this.projects.length === 0) {\n        const contacts = await this.http.get<Contact[]>(this.baseUrl + '2.0/contact/?order_by=name_1_asc').toPromise();\n        this.contacts = contacts\n        this.contactsUpdated.next(null)\n      }\n      resolve(this.contacts)\n    });\n  }\n\n  public async getProjects(force = false): Promise<Project[]> {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (force || this.projects.length === 0) {\n          const projects = await this.http.post<Project[]>(this.baseUrl + '2.0/pr_project/search?order_by=name&limit=' + this.limit, [{ \"field\": \"pr_state_id\", \"value\": \"2\", \"criteria\": \"=\" }]).toPromise();\n          this.projects = projects\n          for (var i = 0; i < this.projects.length; i++) {\n            this.projects[i].packages = this.cachedPackagesProjectId[this.projects[i].id]\n            if (this.projects[i].packages) {\n              this.projects[i].spent_time_in_hours = 0\n              this.projects[i].estimated_time_in_hours = 0\n\n              for (var j = 0; j < this.projects[i].packages.length; j++) {\n                if (this.projects[i].packages[j].estimated_time_in_hours) this.projects[i].estimated_time_in_hours += this.projects[i].packages[j].estimated_time_in_hours\n                if (this.projects[i].packages[j]) this.projects[i].spent_time_in_hours += this.projects[i].packages[j].spent_time_in_hours\n              }\n            }\n            this.projectMap[this.projects[i].id] = this.projects[i]\n          }\n          this.projectsUpdated.next(null)\n        }\n        resolve(this.projects)\n      } catch (error) {\n        reject(error)\n      }\n    });\n  }\n\n  private prepareTimesheetForApi(timesheet: Timesheet) {\n    delete timesheet.travel_time\n    delete timesheet.travel_charge\n    delete timesheet.travel_distance\n    delete timesheet.date\n    delete timesheet.duration\n    delete timesheet.running\n    delete timesheet.user\n    delete timesheet.project\n    delete timesheet.package\n    if (timesheet.tracking.type === 'duration') {\n      delete timesheet.tracking.start\n      delete timesheet.tracking.end\n    } else {\n      timesheet.tracking.start = new DatePipe('en-US').transform(timesheet.tracking.start, 'yyyy-MM-dd HH:mm');\n      timesheet.tracking.end = new DatePipe('en-US').transform(timesheet.tracking.end, 'yyyy-MM-dd HH:mm');\n\n      delete timesheet.tracking.date\n      delete timesheet.tracking.duration\n    }\n    return timesheet\n  }\n\n  public async putTimesheet(timesheet: Timesheet): Promise<Timesheet> {\n    let preparedTimesheet = this.prepareTimesheetForApi(timesheet)\n    delete preparedTimesheet.tracking.type\n    return new Promise(async (resolve, reject) => {\n      let newTimesheet = await this.http.post<Timesheet>(this.baseUrl + '2.0/timesheet/' + timesheet.id, preparedTimesheet).toPromise()\n      this.getMyTimesheets(true)\n      resolve(newTimesheet)\n    })\n  }\n\n  public async postTimesheet(timesheet: Timesheet): Promise<Timesheet> {\n    let preparedTimesheet = this.prepareTimesheetForApi(timesheet)\n    delete preparedTimesheet.id\n    return new Promise(async (resolve, reject) => {\n      let newTimesheet = await this.http.post<Timesheet>(this.baseUrl + '2.0/timesheet', preparedTimesheet).toPromise()\n      this.getMyTimesheets(true)\n      resolve(newTimesheet)\n    })\n  }\n\n  public async deleteTimesheet(id: number): Promise<void> {\n    return new Promise(async (resolve, reject) => {\n      await this.http.delete<Timesheet>(this.baseUrl + '2.0/timesheet/' + id).toPromise()\n      this.getMyTimesheets(true)\n      resolve()\n    })\n  }\n\n  public async getTimesheetStatus(force = false): Promise<TimesheetStatus[]> {\n    return new Promise(async (resolve, reject) => {\n      if (force || this.timesheetStatus.length === 0) {\n        try {\n          this.timesheetStatus = await this.http.get<TimesheetStatus[]>(this.baseUrl + '2.0/timesheet_status').toPromise();\n          resolve(this.timesheetStatus)\n        } catch (error) {\n          reject(error)\n        }\n      }else{\n        resolve(this.timesheetStatus)\n      }\n    })\n  }\n\n  public async getClientService(force = false): Promise<ClientService[]> {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (force || this.clientServicees.length === 0) {\n          this.clientServicees = await this.http.get<ClientService[]>(this.baseUrl + '2.0/client_service').toPromise();\n        }\n        console.log('this.clientServicees', this.clientServicees)\n        resolve(this.clientServicees)\n      } catch (error) {\n        reject(error)\n      }\n    })\n  }\n\n  public async getTimesheet(time_id: number, force = false): Promise<Timesheet> {\n    return new Promise(async (resolve, reject) => {\n      if (!force) {\n        let filteredTimesheets = this.timesheets.filter(timesheet => timesheet.id === time_id)\n        if (filteredTimesheets.length === 1) {\n          resolve(filteredTimesheets[0])\n          return\n        }\n      }\n      const timesheet = await this.http.get<Timesheet>(this.baseUrl + '2.0/timesheet/' + time_id).toPromise()\n      timesheet.user = this.usersMap[timesheet.user_id]\n      timesheet.project = this.projectMap[timesheet.pr_project_id]\n      timesheet.package = this.cachedPackagesPackageId[timesheet.pr_package_id]\n      timesheet.tracking = this.utilsService.prepareTracking(timesheet.tracking)\n      timesheet.text = new DOMParser().parseFromString(timesheet.text, 'text/html').documentElement.textContent\n      resolve(timesheet)\n    })\n  }\n\n  public getMyTimesheets(force = false): Promise<Timesheet[]> {\n    return new Promise(async (resolve, reject) => {\n      let user = await this.getUser()\n      let timesheets = await this.getTimesheets(user.id, force)\n      if (force) {\n        this.timesUpdated.next(null)\n      }\n      resolve(timesheets)\n    })\n  }\n\n  public searchContact(value): Promise<Contact[]> {\n    return new Promise(async (resolve, reject) => {\n      try {\n        let firstname = this.http.post<Contact[]>(this.baseUrl + '2.0/contact/search?limit=20', [\n          {\n            \"field\": \"name_1\",\n            \"value\": value,\n            \"criteria\": \"like\"\n          }\n        ]).toPromise()\n        let lastname = this.http.post<Contact[]>(this.baseUrl + '2.0/contact/search?limit=20', [\n          {\n            \"field\": \"name_2\",\n            \"value\": value,\n            \"criteria\": \"like\"\n          }\n        ]).toPromise()\n\n        resolve([...await firstname, ...await lastname])\n      } catch (error) {\n        reject(error)\n      }\n    })\n  }\n\n  public async getTimesheets(user_id: number = -1, force = false): Promise<Timesheet[]> {\n    return new Promise(async (resolve, reject) => {\n      if (force || this.timesheets.length === 0) {\n        const timesheets: Timesheet[] = []\n        if (user_id > -1) {\n          const filter = [\n            {\n              \"field\": \"user_id\",\n              \"value\": user_id,\n              \"criteria\": \"=\"\n            }\n          ]\n          timesheets.push(...await await this.http.post<Timesheet[]>(this.baseUrl + '2.0/timesheet/search?order_by=date_desc,id_desc&limit=500', filter).toPromise())\n          // timesheets.map(timesheet => {\n          //   timesheet.tracking = {\n          //     duration: timesheet.duration,\n          //     date: timesheet.date,\n          //     type: 'duration'\n          //   }\n          //   return timesheet\n          // })\n        } else {\n          timesheets.push(...await this.http.get<Timesheet[]>(this.baseUrl + '2.0/timesheet?order_by=date_desc,id_desc').toPromise())\n        }\n\n        for (var i = 0; i < timesheets.length; i++) {\n          timesheets[i].user = this.usersMap[timesheets[i].user_id]\n          timesheets[i].project = this.projectMap[timesheets[i].pr_project_id]\n          timesheets[i].package = this.cachedPackagesPackageId[timesheets[i].pr_package_id]\n          timesheets[i].tracking = this.utilsService.prepareTracking(timesheets[i].tracking)\n          timesheets[i].text = new DOMParser().parseFromString(timesheets[i].text, 'text/html').documentElement.textContent\n\n        }\n        this.timesheets = timesheets\n      }\n      resolve(this.timesheets)\n    })\n  }\n\n  // public async getTimesheetsWithPackages(): Promise<Timesheet[]> {\n  //   return new Promise(async (resolve, reject) => {\n  //     const timesheets = await this.http.get<Timesheet[]>(this.baseUrl + '2.0/timesheet?order_by=date_desc').toPromise()\n\n  //     for (var i = 0; i < timesheets.length; i++) {\n  //       timesheets[i].user = this.usersMap[timesheets[i].user_id]\n  //       timesheets[i].project = this.projectMap[timesheets[i].pr_project_id]\n  //       timesheets[i].package = this.cachedPackagesPackageId[timesheets[i].pr_package_id]\n  //     }\n\n  //     resolve(timesheets)\n  //   })\n  // }\n\n  public getUsers(): Promise<any> {\n    return new Promise(async (resolve, reject) => {\n      resolve(this.users)\n    })\n  }\n\n  public async getPackages(force = false) {\n    await this.getProjects(force)\n    let promises = []\n    for (var i = 0; i < this.projects.length; i++) {\n      const projectid = this.projects[i].id\n      let promise = this.getPackagesForProject(projectid).then(packagesForProject => {\n        this.cachedPackagesProjectId[projectid] = packagesForProject\n        for (var j = 0; j < packagesForProject.length; j++) {\n          this.cachedPackagesPackageId[packagesForProject[j].id] = packagesForProject\n        }\n        this.packages.push(...packagesForProject)\n      })\n      promises.push(promise)\n    }\n    await Promise.all(promises);\n    await this.getProjects(true)\n    this.projectsUpdated.next(null)\n  }\n\n  public getPackageForProjectWithId(project_id: number, package_id: number): Promise<Package> {\n    return this.http.get<Package>(this.baseUrl + '3.0/projects/' + project_id + '/packages/' + package_id).toPromise();\n  }\n\n  public getPackagesForProject(project_id: number): Promise<Package[]> {\n    return this.http.get<Package[]>(this.baseUrl + '3.0/projects/' + project_id + '/packages').toPromise();\n  }\n\n  public async getUser(): Promise<User> {\n    return new Promise(async resolve => {\n      resolve(this.currentUser)\n    })\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController, ToastController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Plugins } from '@capacitor/core';\nimport { TimesheetTracking } from 'src/app/models/timesheet_tracking';\nconst { LocalNotifications } = Plugins;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilsService {\n\n  constructor(\n    private toastCtroller: ToastController,\n    private alertController: AlertController,\n    private translateService: TranslateService\n  ) { }\n\n  public static pad(num, size = 2) {\n    let s = num + \"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n  }\n\n  private parseBexioDate(date: string){\n    if(date && date.indexOf(' ') === -1) return new Date(date)\n    let dateOnly = date.split(' ')[0]\n    let timeOnly = date.split(' ')[1].split(':').map(i => parseInt(i))\n    let newDate = new Date(dateOnly)\n    newDate.setHours(timeOnly[0], timeOnly[1], timeOnly[2])\n    return newDate\n  }\n\n  public prepareTracking(tracking: TimesheetTracking): TimesheetTracking {\n    let today = new Date().toISOString();\n    (['date', 'start', 'end']).forEach(field => {\n      if(!tracking[field]){\n        tracking[field] = today \n      }else{\n        tracking[field] = this.parseBexioDate(tracking[field]).toISOString()\n      }\n    })\n    return tracking\n  }\n\n  public requestNotificationPermission() {\n    return new Promise<void>(async (resolve, reject) => {\n      if (!(await LocalNotifications.requestPermission())) {\n        resolve()\n      } else {\n        reject()\n      }\n    })\n  }\n\n  public parseDuration(duration): number {\n    if(duration === null) return 0\n    return parseFloat(duration) + parseFloat(duration.split(':')[1]) / 60\n  }\n\n  public async showToast(message: string, duration = 3000) {\n    let toast = await this.toastCtroller.create({\n      message: await this.translateService.get(message).toPromise(),\n      duration: duration,\n      position: 'top'\n    });\n    toast.present()\n  }\n\n  public confirm(header, message, confirm = 'Delete', cancel = 'Cancel'): Promise<boolean> {\n    return new Promise(async (resolve, reject) => {\n      const alert = await this.alertController.create({\n        header: await this.translateService.get(header).toPromise(),\n        message: await this.translateService.get(message).toPromise(),\n        buttons: [\n          {\n            text: await this.translateService.get(cancel).toPromise(),\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: () => {\n              resolve(false)\n            }\n          }, {\n            text: await this.translateService.get(confirm).toPromise(),\n            cssClass: 'danger',\n            handler: () => {\n              resolve(true)\n            }\n          }\n        ]\n      });\n      alert.present();\n    })\n  }\n}\n"],"names":["EventEmitter","AuthActions","DatePipe","ApiService","constructor","http","authService","utilsService","corsProxy","init","Promise","resolve","reject","observer","_this","addActionListener","action","LoadUserInfoSuccess","users","get","baseUrl","toPromise","i","length","usersMap","id","all","getTimesheetStatus","getClientService","getProjects","email","user","currentUser","removeActionObserver","error","loadUserInfo","getContacts","force","_this2","projects","contacts","contactsUpdated","next","_this3","post","limit","packages","cachedPackagesProjectId","spent_time_in_hours","estimated_time_in_hours","j","projectMap","projectsUpdated","prepareTimesheetForApi","timesheet","travel_time","travel_charge","travel_distance","date","duration","running","project","package","tracking","type","start","end","transform","putTimesheet","preparedTimesheet","_this4","newTimesheet","getMyTimesheets","postTimesheet","_this5","deleteTimesheet","_this6","delete","_this7","timesheetStatus","_this8","clientServicees","console","log","getTimesheet","time_id","filteredTimesheets","_this9","timesheets","filter","user_id","pr_project_id","cachedPackagesPackageId","pr_package_id","prepareTracking","text","DOMParser","parseFromString","documentElement","textContent","_this10","getUser","getTimesheets","timesUpdated","searchContact","value","firstname","_this11","lastname","_this12","push","getUsers","_this13","getPackages","_this14","promises","projectid","promise","getPackagesForProject","then","packagesForProject","getPackageForProjectWithId","project_id","package_id","_this15","factory","providedIn","Plugins","LocalNotifications","UtilsService","toastCtroller","alertController","translateService","pad","num","size","s","parseBexioDate","indexOf","Date","dateOnly","split","timeOnly","map","parseInt","newDate","setHours","today","toISOString","forEach","field","requestNotificationPermission","requestPermission","parseDuration","parseFloat","showToast","message","toast","create","position","present","confirm","header","cancel","alert","buttons","role","cssClass","handler"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}